
<!DOCTYPE html>
<html>
<head>
  <title>PhotoStructure release notes</title>
  <meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: "Helvetica", "Verdana", sans-serif;
      /* support momentum scrolling on iOS devices: */
      -webkit-overflow-scrolling: touch;
    }
    @media (max-width: 647px) {
      body { margin: 16px; }
      h1 { font-size: 20px; }
      h2 { font-size: 18px; }
      h3 { font-size: 16px; }
      li, p { font-size: 13px; }
    }
    @media (min-width: 648px) {
      body { max-width: 600px; margin: 24px auto; }
      h2 { font-size: 28px; }
      h2 { font-size: 24px; }
      h3 { font-size: 20px; }
      li, p { font-size: 16px; }
    }
  </style>
</head>
<body>
<h1>PhotoStructure release notes</h1>
<!-- markdownlint-disable MD002 MD041  -->
<h2 id="v072">v0.7.2</h2>
<h3 id="released20191212">Released 2019-12-12</h3>
<ul>
<li>âœ¨ Added a link to the post-install tips in the "starting up" message</li>
<li>âœ¨ Platform-default "back" and "forward" keystrokes now work for PhotoStructure
for Desktops. On macOS, cmd-left and cmd-right to go back and forward, and on
Windows and Ubuntu, alt-left and alt-right do the same.</li>
<li>ğŸ› The settings page doesn't submit if the user hits the <code>enter</code> key anymore</li>
<li>ğŸ› Forced scrollbar to render on the info panel</li>
<li>ğŸ› Removed duplicate and bad library path suggestions in the welcome page</li>
<li>âœ¨ <code>photostructure web</code> now accepts a <code>--expose</code> argument. See <code>--help</code> for all
options.</li>
<li>ğŸ› library settings now correctly pass through non-default values.</li>
<li>ğŸ› Browsing via Firefox would sometimes raise <code>SIGPIPE</code>s. These are
~~ignored~~ handled gracefully now.</li>
</ul>
<h2 id="v071">v0.7.1</h2>
<p>If you automatically upgraded to this version, you'll need manually install
v0.7.2, as this version never exits the splash screen. Apologies!</p>
<h2 id="v070">v0.7.0</h2>
<h3 id="released20191211">Released 2019-12-11</h3>
<h3 id="settingschanges">ğŸ’” Settings changes</h3>
<p>A number of settings were moved from the library settings file to the server
settings file. <strong>This migration should happen automatically</strong> after you update
your version of PhotoStructure (on all platforms). The affected settings are:</p>
<ul>
<li><code>copyAssetsToLibrary</code></li>
<li><code>scanAllDrives</code></li>
<li><code>scanMyPictures</code></li>
<li><code>scanPaths</code></li>
</ul>
<p>More information about <a href="https://support.photostructure.com/advanced-settings/">changing advanced settings has been added to the support
site</a>.</p>
<h3 id="automaticupgradesonwindowsandlinux">Automatic upgrades on Windows and Linux</h3>
<p>Automatic upgrades may have broken for some users on Windows and Linux.</p>
<p>Please manually download and install the newest version. You don't need to
uninstall the previous version beforehand. Sorry for the inconvenience!</p>
<h3 id="scanpathimprovements">Scan path improvements</h3>
<ul>
<li>âœ¨ The custom scan paths field on the settings page now natively supports
multiple paths, and both os-specific delimiters (like <code>:</code> or <code>;</code>) as well as
<code>Â¦</code> may be used (in case directories include the delimiter character).</li>
</ul>
<h3 id="photostructureforserverstake2">PhotoStructure for Servers, take 2</h3>
<p>If you're a PhotoStructure for Docker user, please fetch new copies of the
<code>photostructure.env</code> and <code>start-docker.sh</code> files. A bunch of new stuff is in
this version:</p>
<ul>
<li><p>âœ¨ The <code>SCAN_PATH</code> value in <code>photostructure.env</code> used to be a colon-separated
value, but this is now a proper bash array. This supports paths that have
colons in their names (like SMB mounts via GIO). Update your copy of
<code>photostructure.env</code> by following the instructions at
<a href="https://support.photostructure.com/photostructure-for-docker/">https://support.photostructure.com/photostructure-for-docker/</a>.</p></li>
<li><p>âœ¨ The <code>start-docker.sh</code> script now automatically updates. If you already
started using PhotoStructure for Docker, you'll need to manually fetch a new
copy by following the instructions at
<a href="https://support.photostructure.com/photostructure-for-docker/">https://support.photostructure.com/photostructure-for-docker/</a>.</p></li>
<li><p>âœ¨ The <code>PS_TMP_DIR</code> scratch directory is now configurable, and should point to
a fast scratch disk with several gigabytes free on the host machine. This is a
new variable in <code>photostructure.env</code>, and should be set properly to prevent
container bloat and possible Docker crashes.</p></li>
<li><p>âœ¨ <code>PS_*</code> environment variables, set either in your <code>photostructure.env</code>
or set in the <code>env</code> of the shell that is calling <code>start-docker.sh</code>, are now
passed through to Docker.</p></li>
<li><p>âœ¨ <code>start-docker.sh</code> now accepts an argument, which is passed through to
<code>docker-compose</code>:</p></li>
<li><p>To run the services in the background (and ctrl-c to stop), run <code>start-docker.sh start</code>. This is the default.</p></li>
<li><p>To run the services in the foreground (and ctrl-c to stop), run <code>start-docker.sh up</code>.</p></li>
<li><p>To just view the resulting <code>docker-compose.yml</code> and not start services, run <code>start-docker.sh config</code>.</p></li>
<li><p>To stop services, run either <code>docker-compose stop</code> or <code>start-docker.sh stop</code>.</p></li>
<li><p>ğŸ› The settings page no longer allows the library path to be changed when
running under docker. Instead, the library path should be changed in
<code>photostructure.env</code> and <code>start-docker.sh</code> should be re-run.</p></li>
</ul>
<h3 id="additionalkeywordextractors">Additional keyword extractors</h3>
<p>âœ¨ Tags found in filenames or parent directories that follow <code>--</code> are now added
automatically. If you already have a library, run a full sync to pull in these
new tags. Here are a couple examples:</p>
<ul>
<li>All files found in <code>/Users/bob/Pictures/2019-02-14/--event travel/</code> would
be given <code>Keyword/event</code> and <code>Keyword/travel</code> tags.</li>
<li>The file <code>/home/karen/2018-11-23/P317812--ocean.jpg</code> would be given the
<code>Keyword/ocean</code> tag.</li>
</ul>
<h3 id="bugfixes">Bug fixes</h3>
<ul>
<li><p>ğŸ› Thumbnails for vertical videos are now correctly oriented and scaled.</p></li>
<li><p>ğŸ›/âœ¨ Symlink loops in filesystems are detected and skipped over (even on NAS!).</p></li>
<li><p>ğŸ› Main process error handling now respects the error rate setting, which
defaults to 10 per minute. Prior versions would shut down PhotoStructure
completely if any subprocess threw a fatal error.</p></li>
<li><p>ğŸ› The new "Starting syncâ€¦" and "Your library is currently empty" messages
on the home page linked to the About window, but clicking that link didn't
work correctly. The link now correctly opens the about window in a separate
page.</p></li>
<li><p>ğŸ› The "Restart sync" menu items were incorrectly ~~greyed (grayed?) out~~
disabled even after a library was set up. They are enabled after going through
the welcome screen, now.</p></li>
<li><p>âœ¨ PhotoStructure's temp directory is cleaned every 15 minutes. Some beta
testers had disk-full warnings with the prior settings of cleaning only every
hour.</p></li>
<li><p>ğŸ›/âœ¨ Some Windows beta testers had configured their PowerShell to emit
profiling information at startup, which prevented several systems from running
properly. We now use both <code>-NoProfile</code> and <code>-NoLogo</code> options which should help
PowerShell spin up faster. We also validate PowerShell's status as a health
check on Windows, and include the PowerShell version in the About window. Note
that PowerShell is used to copy files if native streaming methods fail, as
well as test directories to see if they are hidden, as well as pulling
filesystem and process table metadata.</p></li>
<li><p>âœ¨ All dependencies were updated. Electron was updated for PhotoStructure for
Desktop.</p></li>
</ul>
<h2 id="v062">v0.6.2</h2>
<h3 id="released20191123">Released 2019-11-23</h3>
<ul>
<li>ğŸ› On web restart-on-error, prior library lock is released by main before
restarting web. This resolves the "Library is already open" crash bug.</li>
<li>ğŸ› Sync restarts properly when settings are changed (including the library
path)</li>
<li>ğŸ› Under certain circumstances, library paths could be removed from system
settings, resulting in the welcome page being shown if PhotoStructure was
restarted. This has been fixed.</li>
<li>ğŸ› Main process logs weren't initialized correctly, preventing log
persistence.</li>
<li>ğŸ› Downgraded Electron to 7.1.1 (may avoid new SIGSEGV from 7.1.2 on mac)</li>
<li>ğŸ› Extended filesystem timeout from 25 seconds to 35 seconds (external drives
can be very slow to spin up!)</li>
<li>âœ¨ Files that are found to be missing (and their mountpoint or parent directory
still exists) are removed from the db, orphaned assets are subsequently
removed from the library.</li>
<li>âœ¨ Fixed grammar in progress bars</li>
<li>âœ¨ Files that have been deleted are now removed from the db as well</li>
<li>âœ¨ Assets that no longer have files associated to them are removed</li>
<li>âœ¨ <code>Download</code> and <code>Downloads</code> directories are now automatically ignored.</li>
<li>âœ¨ <code>.photoslibrary</code> subdirectories are now ignored, except for <code>Masters</code>.</li>
</ul>
<h2 id="v061">v0.6.1</h2>
<h3 id="released20191121">Released 2019-11-21</h3>
<ul>
<li>ğŸ› Window buttons on settings work within Electron</li>
<li>ğŸ› Electron updates were re-enabled for Linux AppImages</li>
</ul>
<h2 id="v060">v0.6.0</h2>
<h3 id="released20191120">Released 2019-11-20</h3>
<p>Please note that this version will require revisiting the files in your library
to recompute metadata, compute image hashes, extract new lens and keyword tags,
and re-encode preview images as progressive JPEGs. This will happen
automatically after you upgrade PhotoStructure.</p>
<p>Thanks for your patience while PhotoStructure upgrades your library!</p>
<h3 id="breakingchanges">ğŸ’” Breaking changes</h3>
<ul>
<li><p><strong>macOS is now notarized</strong>. Official support for macOS 10.11-10.13 (El Capitan
through Sierra) has been dropped (although it may still work for you). Note
that El Capitan <a href="https://support.apple.com/en-us/HT201222">hasn't received a security update for more than a
year</a>. 64-bit binaries are now being
built and tested on macOS Mojave.</p></li>
<li><p>Replaced the <code>maxPreviewResolution</code> library setting with <code>previewResolutions</code>.
See the description of the setting for more details.</p></li>
</ul>
<h3 id="performanceimprovements">ğŸš€ Performance improvements</h3>
<ul>
<li>âœ¨ <code>ffmpeg</code>, if installed, is now used for frame extraction and transcoding
instead of VLC (in preparation for PhotoStructure for Servers). You may find
ffmpeg faster than VLC. See
<a href="https://support.photostructure.com/vlc-installation/">https://support.photostructure.com/vlc-installation/</a> for more information.</li>
<li>âœ¨ Preview images are progressively encoded now (see the <code>progressive</code> library
setting, which defaults to <code>true</code>). This takes a bit more time, and can be
disabled in Settings.</li>
<li>âœ¨ Captured-at times are stored in local-numeric-centisecond format, rather
than an ISO string. This takes a fraction of space compared to the prior
format.</li>
<li>âœ¨ Home page queries for large libraries in previous versions took upwards of
500ms. The new <code>dbCacheSizeMb</code> system setting now defaults to 128 MB, which
should handle large (quarter-million asset) libraries. If you have a larger
library, double this value, and be sure to email us if you see anything else
not run quickly.</li>
<li>âœ¨ The webserver was profiled and several hotspots were inlined. Average
request latency on average desktop CPUs should now be 10 ms or less.</li>
<li>âœ¨ CSS assets are all concatenated now.</li>
<li>âœ¨ All static assets are now gzip'ed and transferred compressed.</li>
<li>âœ¨ Image lazy loading was profiled and optimized.</li>
<li>âœ¨ Icons in prior version used a webfont, which caused flashes of unstyled
text. All icons were replaced with inline SVG components. At least on Firefox
and Chrome, initial page load times are measurably faster.</li>
<li>ğŸ“¦ Both frontend and backend code is now compiled to es2015 (rather than es5),
which reduced payloads by &gt; 10%.</li>
<li>âœ¨ Web requests are prioritized over RPC synchronization requests by the
webserver, which allows the web UX to stay performant even during sync
processes.</li>
<li>âœ¨ Non-mutating API calls from the frontend are retried (should help smooth
over webserver restarts or glitchy networks).</li>
<li>âœ¨ The <code>logtail</code> command now uses non-polling filesystem notifications (via
<code>chokidar</code>), and orders log lines chronologically.</li>
</ul>
<h3 id="robustdeduplication">ğŸ’ª Robust de-duplication</h3>
<ul>
<li>âœ¨ PhotoStructure's photo and video merging algorithm was revisited in this
version. The prior implementation used 2 hash comparisons, which failed to
match after some lossy image and video transforms (like from cloud backups).
The new implementation uses 10 different hash values, including several hashes
based on actual image contents (using rotation-invariant L<em>a</em>b* values, if
you're interested). This (and lens and keyword tagging and better preview
image generation and better video transcoding) is why this version requires
prior libraries to be upgraded.</li>
</ul>
<h3 id="lenstagging">ğŸ¥ Lens tagging</h3>
<ul>
<li>âœ¨ If a photo or video has lens metadata, that will be added as a tag, and
is navigable via the new root tag, "Lens".</li>
</ul>
<h3 id="photoandvideorotation">ğŸ”„ Photo and video rotation</h3>
<ul>
<li>âœ¨ Added support for photo and video rotation. Click on an asset, and hit <code>r</code>
(or the rotate icon in the header) to rotate counter-clockwise 90 degrees. Hit
<code>r</code> or click the rotation icon multiple times in a row to rotate more than 90
degrees. Saving happens in the background, and is non-destructive.</li>
<li>ğŸ“¦ The <code>writeMetadataToSidecars</code> library setting controls how the rotation
metadata is persisted. The default is to save a new sidecar, or update an
existing sidecar, with the new orientation.</li>
<li>ğŸ“¦ Asset thumbnails and preview images are now fetched with timestamp params.
This allows the UI to stay in sync with the library database, and still cache
images when appropriate. <em>Depending on the speed of your browser, you may see
a flash of an incorrectly-rotated image immediately after rotating: we know,
and we'll try to fix it in the next release.</em></li>
</ul>
<h3 id="zoomondesktop">ğŸ” Zoom on desktop</h3>
<ul>
<li>âœ¨ When viewing an image full-screen, you can now type 'z', or single-click in
the middle of the photo, click the new zoom icon in the upper right corner, or
mousewheel-up to zoom into the image. Moving the mouse pans the position of
the zoomed-in image. Mousewheel controls the scale of zoom. Typing 'z', the
'esc' key, clicking in the middle of the screen, or clicking the zoom icon
will return to normal mode.</li>
</ul>
<h3 id="zoomonmobile">ğŸ” Zoom on mobile</h3>
<ul>
<li>âœ¨ To zoom into an image or video on a tablet or phone, just pinch out on the
image. As you zoom in, higher resolution images will be loaded in-place of the
current image to ensure the highest quality pixel peeping experience.</li>
</ul>
<h3 id="responsiveui">ğŸ“± Responsive UI</h3>
<ul>
<li>âœ¨ The welcome/settings page is now responsive and usable from an iPhone SE to
a 4k display.</li>
<li>âœ¨ The header slides away on scroll-down (and sliding back on scroll-up),
providing more screen real-estate on mobile devices.</li>
<li>ğŸ› The "fullscreen" button was removed. There were a couple scrolling bugs
that don't seem to have nice workarounds, and the new hiding header makes this
less pressing a feature on mobile.</li>
</ul>
<h3 id="generalimprovements">âœ¨ General improvements</h3>
<ul>
<li>âœ¨ PhotoStructure for Desktop now has an application menu on macOS. YAY.</li>
<li>âœ¨ Standard keystrokes for display zoom, copy, paste, and devtools now work.</li>
<li>ğŸ› Some people reported crashes on macOS after long (&gt; 24 hour) sync runs.
PhotoStructure now automatically restarts the sync process every 6 hours or if
memory consumption exceeds 1GB, which should spackle over this issue.</li>
<li>âœ¨ PhotoStructure now uses reverse-chronological order consistently. Photo
streams had previously been chronological order, and tags were reverse-chron.
Fixes #42.</li>
<li>âœ¨ Image hashes are now used to coallesce similar assets that have had their
metadata stripped.</li>
<li>âœ¨ Excluding images due to missing Make or Model is now a Setting</li>
<li>âœ¨ The <code>info</code> tool now reports explaining why 2 files would or wouldn't belong
with the same asset</li>
<li>ğŸ›/âœ¨ Google Takeouts sometimes provides JSON sidecars with GPS and other
metadata. PhotoStructure now knows how to read this sidecar metadata.</li>
<li>ğŸ›/âœ¨ Timeliner and other cloud storage solutions may provide edited versions
of your images that are stripped of GPS tags. Prior ExifUID versions assumed
GPS wouldn't be deleted.</li>
<li>ğŸ“¦ Asset counts for tags are formatted nicely for the user's locale (like
"1,523 assets" for <code>en_US</code>)</li>
<li>ğŸ“¦ The Asset Info panel had links for downloading and for showing the asset
file in the enclosing folder, but most users didn't know that those links
existed. There's now a pulldown menu by each asset file path with those
options.</li>
<li>ğŸ“¦ <code>showItemInFolder</code> now runs directly from the webserver.</li>
<li>ğŸ› <code>showItemInFolder</code> on Ubuntu could fail if there were network filesystems
in a bad state. We ignore those errors now, so the Nautilus window can stay
shown.</li>
<li>ğŸ› Network disconnections (due to system sleep or suspend) should no longer
raise error dialogs.</li>
<li>ğŸ“¦ Added <code>**/tmp/**</code> to the directory exclusion filters. Previously only
<code>/tmp</code> and <code>/var/tmp</code> root directories had been excluded.</li>
<li>ğŸ“¦ Ignore <code>**/com.apple.TimeMachine.localsnapshots</code> directories</li>
<li>ğŸ“¦ All third-party dependencies were updated, which pulled in several security
patches, including SQLite 3.29.0.</li>
<li>âœ¨ Database backups are automatically taken before every migration set is
applied (to allow for recovery via customer support)</li>
</ul>
<h3 id="customersupport">âœ¨ Customer support</h3>
<ul>
<li>âœ¨ The <code>about</code> window now supports copying system metadata to the clipboard,
or emailing to support via a <code>mailto:</code>.</li>
<li>âœ¨ <code>Send recent logs</code> from the system tray sends all currently-running process
logs to Sentry.</li>
</ul>
<h2 id="v051">v0.5.1</h2>
<h3 id="released20190606">Released 2019-06-06</h3>
<ul>
<li>ğŸ“¦ Directory iteration uses a new, much smaller (non-cached) class to track
filesystem metadata. This should help reduce memory consumption while scanning
large filesystems.</li>
<li>ğŸ“¦ Ignore <code>/nix/store/...</code> <a href="https://nixos.org/nixos/about.html">directories</a></li>
<li>ğŸ“¦ Support parsing folder names as dates that use <code>.</code> or <code>,</code> field separators
(like <code>Pictures/2019.03.14/image.jpg</code>)</li>
<li>ğŸ“¦ Launching PhotoStructure automatically checks for updates now. This can be
disabled with the <code>updateOnLaunch</code> system setting.</li>
<li>ğŸ› Random gallery contents no longer change every minute</li>
<li>ğŸ› Setting your <code>LANG</code> to <code>C</code> is supported (and considered a synonym for
<code>en</code>).</li>
</ul>
<h2 id="v050">v0.5.0</h2>
<h3 id="released20190601">Released 2019-06-01</h3>
<p>Please note that this version will require a sync to revisit the files in your
library. This will happen automatically.</p>
<h3 id="synchronizationimprovements">âœ¨ Synchronization improvements</h3>
<ul>
<li><p>âœ¨ <strong>Sync runs periodically now</strong>. After <code>sync</code> completes importing all
available volumes, it waits for <code>syncIntervalHours</code> (configurable as a library
setting), and restarts the sync process. This defaults to 24 hours, to balance
picking up new files automatically and trying to avoid unnecessary wear and
tear on your storage media.</p></li>
<li><p>âœ¨ <strong>Files are processed concurrently now</strong>, depending on the number of CPUs
your computer has. This may dramatically speed up sync.</p></li>
<li><p>âœ¨ <strong>Syncs of previously-imported volumes should complete faster now</strong>,
because files are only checked for changes every <code>fileSyncIntervalHours</code>
(configurable as a library setting). This defaults to every week, again, to
try to balance PhotoStructure being in sync with your storage media, and wear
and tear on your disks.</p></li>
<li><p>âœ¨ <strong>NAS support for library storage</strong>: Library lockfiles prevents NAS-stored
libraries from being corrupted by multiple simultaneous writers (or multiple
instances of PhotoStructure on one machine from fighting). If the lockfile is
lost (if, for example, you unplug the NAS or the external drive that your
library is on), PhotoStructure will shuts down automatically.</p></li>
<li><p>âœ¨ <strong>Multiple file asset support</strong>: When there are multiple files representing
a given asset, and the most-recent file is not available, next-most-recent
candidates are now considered for preview generation and tagging purposes.</p></li>
<li><p>âœ¨ <strong>Keyword support</strong>: Assets are tagged with keywords. Keywords are found in
the <code>Keyword</code> IPTC tag and <code>XPKeyword</code> EXIF tag. Sidecars keywords are
included as well.</p></li>
<li><p>âœ¨ <strong>Support for SD cards and smartphones:</strong> In previous versions of
PhotoStructure, local volumes that weren't available to <code>df</code>, or that didn't
have UUIDs could causeâ€¦ issues. OK, fine, they were ğŸ›. Unfortunately,
smartphones, SD cards, and several other types of media don't reliably have
UUIDs, so if PhotoStructure failed to launch (especially on Windows), this
version may fix that for you.</p></li>
<li><p>âœ¨ The <code>ExifUID</code> version was updated to support more original/edited pairs (as
many photo editing apps will delete timezone offset metadata). Whenever a new
ExifUID version is released, your next sync will need to visit all your assets
again. <strong>This should complete much faster than an initial sync.</strong></p></li>
<li><p>ğŸ“¦ <code>scanPaths</code> are scanned first, followed by <code>libraryPath</code>, followed by
mounted volumes (if <code>scanAllDrives</code> is selected).</p></li>
<li><p>ğŸ“¦ <code>logDir</code> is now a system setting (prep for <code>PhotoStructure for Servers</code>)</p></li>
<li><p>ğŸ“¦ on Windows, <code>PowerShell</code> is used rather than <code>attrib</code> to detect if a file
is hidden. This turns out to be up to 10x faster, and as we do this for every
folder, it can speed syncs up substantially.</p></li>
<li><p>ğŸ“¦ Validation of raw images takes between 3 and 30 seconds per file. The
library setting <code>validateRawImages</code> allows this to be skipped if you don't
care to check raw images during library import.</p></li>
<li><p>ğŸ› Recompiled <code>sqlite</code> on macOS as a 64-bit binary, which removes the
<a href="https://support.apple.com/en-us/HT208436">"PhotoStructure is not optimized for your Mac and needs to be updated"
dialog</a>. See #154.</p></li>
<li><p>ğŸ› When <code>web</code> encounters a show-stopper issue (like when the library hard
drive gets unmounted unexpectedly), it can now tell the <code>main</code> process to shut
PhotoStructure down (rather than just restarting endlessly).</p></li>
<li><p>ğŸ› On large tag gallery pages, lazy loading would sometimes load batches out
of order or more than once. Now, they don't duplicate themselves! And they
maintain order! That was an ugly bug, sorry about that. See #121.</p></li>
</ul>
<h2 id="v040">v0.4.0</h2>
<h3 id="released20190507">Released 2019-05-07</h3>
<ul>
<li><p>âœ¨ <strong>Open item in folder</strong>: When browsing on the computer that is running
PhotoStructure, you may now click the photo or video icon by a pathname in the
asset info view, and the parent directory will be opened in the file explorer,
with the current file selected. This lets you subsequently edit the file in
other external apps.</p></li>
<li><p>âœ¨ WVGA was added as a smaller <code>maxPreviewResolution</code> for users only serving
low resolution browsers.</p></li>
<li><p>ğŸ› Settings were rewritten unneccessarily due to a version parsing bug.</p></li>
<li><p>ğŸ› If the library directory goes away while PhotoStructure is running (for
example, when the volume is unmounted or the NAS is shut down), the main
process will shut down. Before this version, PhotoStructure's <code>main</code> process
would try to restart the web process indefinitely.</p></li>
<li><p>ğŸ› Error reporting throttles across processes and services now. Note that
error reporting can be disabled in the system settings.</p></li>
</ul>
<h2 id="v038">v0.3.8</h2>
<h3 id="released20190502">Released 2019-05-02</h3>
<ul>
<li><p>âœ¨ All asset file originals are now directly downloadable via the asset info
panel</p></li>
<li><p>âœ¨ <strong>Metadata sidecar support</strong>:</p></li>
<li><p><code>.XMP</code>, <code>.EXIF</code>, <code>.EXV</code>, and <code>.MIE</code> file types are supported</p></li>
<li><p>If a sidecar is found, the metadata in the sidecar overlays the metadata in
the source file.</p></li>
<li><p>Sidecars are copied to your library along with your original files (if
automatic library organization is enabled)</p></li>
<li><p>âœ¨ During installation, you can now choose "scan everything", "scan my
pictures directory", or "scan this custom folder."</p></li>
<li><p>ğŸ“¦ Updates are only checked for once a day (rather than on every launch, and N
minutes afterwards).</p></li>
<li><p>ğŸ“¦ Upgraded to Electron 5/node 12, which added <code>Dirent</code> support. Large
directories will be scanned much faster thanks to this.</p></li>
<li><p>ğŸ› Changing settings now gracefully restarts sync processes.</p></li>
<li><p>âœ¨ Some smartphone RAW images have slightly different exposure settings than
their JPG counterpart. PhotoStructure now handles these "features" properly,
and will merge the image pairs.</p></li>
</ul>
<h2 id="v037">v0.3.7</h2>
<h3 id="released20190427">Released 2019-04-27</h3>
<ul>
<li><p>ğŸ› Only support VLC <code>v3.0.x</code>, as <code>v2.x</code> doesn't support our transcoding
options, and <code>v4.0.0-dev</code> has bugs with window handling on Windows.</p></li>
<li><p>ğŸ› PowerShell parsing is now more robust. Some Windows beta testers had failed
health checks due to missing filesystem volumes.</p></li>
<li><p>ğŸ› Large image directories with missing metadata confused the tag inference
engine. Tag inference now only looks at the nearest N siblings.</p></li>
<li><p>ğŸ› Some people found that update notification dialogs could be hidden on
Windows. Once an update has been downloaded and is ready to apply, the system
tray now also provides a way to update and restart.</p></li>
<li><p>ğŸ“¦ Several more "ignorable" directory patterns were added, including "smart
previews."</p></li>
<li><p>ğŸ“¦ <code>psnet</code> URIs have case-normalized hostnames</p></li>
<li><p>ğŸ“¦ DB SHAs were reduced from 224 to 192 bits to reduce index memory consumption</p></li>
</ul>
<h2 id="v034">v0.3.4</h2>
<h3 id="released20190420">Released 2019-04-20</h3>
<ul>
<li>ğŸ› Force VLC to ignore existing system configuration to prevent terminal
flashes. See
<a href="https://gitlab.com/photostructure/photostructure/issues/126">#126</a>.</li>
</ul>
<h2 id="v033">v0.3.3</h2>
<h3 id="released20190419">Released 2019-04-19</h3>
<p>ğŸ¥‚ Welcome, second wave of beta users! âœ¨</p>
<ul>
<li><p>ğŸ› "Only examine my Pictures folder" works (again). See
<a href="https://gitlab.com/photostructure/photostructure/issues/118">#118</a>.</p></li>
<li><p>ğŸ“¦ All subdirectories in an iPhoto library are skipped <em>except</em> for <code>Masters</code>. See <a href="https://gitlab.com/photostructure/photostructure/issues/119">#119</a>.</p></li>
<li><p>ğŸ› Stream UX avoids video controls. See
<a href="https://gitlab.com/photostructure/photostructure/issues/57">#57</a>.</p></li>
</ul>
<h2 id="v030">v0.3.0</h2>
<h3 id="released20190415112447">Released 2019-04-15 11:24:47</h3>
<ul>
<li>âœ¨ Page titles (only visible on browsers) now reflect the page content</li>
<li>âœ¨ added another timezone/date parsing heuristic for videos. See
<a href="https://gitlab.com/photostructure/photostructure/issues/29">#29</a></li>
<li>âœ¨ library asset subdirectory timestamp is now configurable via
the <code>assetSubdirectoryDatestampFormat</code> setting.</li>
<li>âœ¨ PID management now supports indefinitely-old processes (which was needed
for web and sync). As long as the parent process id is alive, the process is
allowed to continue.</li>
<li>âœ¨ Common music directories (which may contain album art and music videos) are
now automatically excluded from libraries.</li>
<li>âœ¨ Processes watch their memory consumption now, and restart automatically if
they exceed the <code>maxMemoryMb</code> setting, which defaults to 1 GB. See
<a href="https://gitlab.com/photostructure/photostructure/issues/115">#115</a>.</li>
<li>âœ¨ Service shutdown hung for long-lived services while it waited for all
logfiles to be possibly compressed. This is now done during file rotation.</li>
<li>âœ¨ Tag galleries support browsers that don't comply with the Intersection API,
like Safari on older iOS version, by adding a "Load moreâ€¦" button.</li>
<li>ğŸ“¦ Add support for make/model extraction from new flagship smartphones</li>
<li>ğŸ“¦ support spawning <code>ceil</code> sync-file processes, which should allow for more
CPU saturation during sync.</li>
</ul>
<h2 id="v0217">v0.2.17</h2>
<h3 id="released2019032610am">Released 2019-03-26 10am</h3>
<ul>
<li>ğŸ› CPU scheduling should match maxCpuPercent closer now (the prior formula
underscheduled work)</li>
<li>âœ¨ Flaky filesystems (like NAS over noisy LAN or CDROMs) are retried and then
children are skipped if they can't be scanned. See the new
<code>statTimeoutSeconds</code> setting.</li>
<li>ğŸ“¦ Settings I/O was updated with more help in the intro.</li>
</ul>
<h2 id="v0216">v0.2.16</h2>
<h3 id="released20190325">Released 2019-03-25</h3>
<ul>
<li>ğŸ› Fix metadata date parsing error from Luxon</li>
</ul>
<h2 id="v0215">v0.2.15</h2>
<h3 id="released20190324">Released 2019-03-24</h3>
<ul>
<li>âœ¨ CPU utilization had been by "max CPUs," but that proved difficult to
explain. The new <code>maxCpuPercent</code> setting is a "CPU utilization goal" that
PhotoStructure will attempt to not exceed.</li>
<li>ğŸ“¦ Rebuilt and hand-validated new CpuUsage.</li>
<li>ğŸ“¦ All dependencies are scanned for vulnerabilities after updates</li>
</ul>
<h2 id="v0212alphav0214">v0.2.12-alpha, v0.2.14</h2>
<h3 id="released20190321">Released 2019-03-21</h3>
<ul>
<li>ğŸ› Error handling doesn't crash subprocesses</li>
<li>ğŸ“¦ Heap allocation errors with Electron 4. Back to Electron 3.</li>
</ul>
<h2 id="v0211alpha">v0.2.11-alpha</h2>
<h3 id="released20190320">Released 2019-03-20</h3>
<ul>
<li>ğŸ› Fix <a href="https://gitlab.com/mceachen/photostructure/issues/88">Windows PowerShell
parsing</a></li>
</ul>
<h2 id="v0210alpha">v0.2.10-alpha</h2>
<h3 id="released20190319">Released 2019-03-19</h3>
<ul>
<li>ğŸ› Fix <a href="https://gitlab.com/mceachen/photostructure/issues/74">Ubuntu upgrade results in 2 tray
icons</a></li>
<li>ğŸ› Default log level is now <code>error</code>, so logfiles don't bother people:
<a href="https://gitlab.com/mceachen/photostructure/issues/74">#74</a></li>
<li>ğŸ› All files use ExpressJS's <code>sendFile</code> now, which sets etags correctly and
handles chunked encoding. This should fix
<a href="https://gitlab.com/mceachen/photostructure/issues/36">#36</a></li>
<li>ğŸ“¦ New sharp and Electron 4. We'll see how that goes.</li>
</ul>
<h2 id="v029alpha">v0.2.9-alpha</h2>
<h3 id="released20190315">Released 2019-03-15</h3>
<ul>
<li>âœ¨ Mac's TextEdit defaults to saving text files with smartquotes, which
corrupts the <code>settings.toml</code> files. PhotoStructure straightens out quotes for
you.</li>
<li>ğŸ› Volumes weren't being marked as "complete" properly.</li>
<li>ğŸ› <code>maxProcs</code> ignored values greater than 1.</li>
<li>âœ¨ External tasks on Windows were migrated from using <code>wmic</code> to using
long-lived, batch-cluster-managed <code>PowerShell</code>.</li>
<li>âœ¨ Directory scanning doesn't stat every file anymore. (It had been done
before to update the progress bar, but it made scanning expensive, especially
to NASes). See <a href="https://gitlab.com/mceachen/photostructure/issues/80">#80</a>.</li>
</ul>
<h2 id="v028alpha">v0.2.8-alpha</h2>
<h3 id="released20190309">Released 2019-03-09</h3>
<ul>
<li>âœ¨ all processes spawned by PhotoStructure are tracked by pidfiles now, which
lets cleanup happen both while PhotoStructure is running, as well as on
launch, to clean up from prior runs.</li>
<li>ğŸ› rebuilt file import timeout calculations, which incorrectly prevented some
larger raw image and video files from being imported.</li>
</ul>
<h2 id="v027alpha">v0.2.7-alpha</h2>
<h3 id="released20190301">Released 2019-03-01</h3>
<ul>
<li>âœ¨ added PullProgressObserver to video and raw image transcode ops</li>
<li>âœ¨ long operations (like file copies, SHA, and video transcoding) now show up
in progress reports.</li>
<li>âœ¨ only 1 video transcode will happen concurrently (as ffmpeg and vlc are
already multithreaded). If other CPUs are available, they will import pending
images.</li>
</ul>
<h2 id="v026alpha">v0.2.6-alpha</h2>
<h3 id="released20190224">Released 2019-02-24</h3>
<p>setting. Video streaming in the UI now autoplays instantly.</p>
<ul>
<li>âœ¨ added support for a number of new image and video file types.</li>
<li>âœ¨ work planner supports prioritized on-idle workers, which means file
scanning can happen while asset importing happens, simultaneously.</li>
<li>ğŸ› "stuck" detection was problematic. Removed for now.</li>
<li>âœ¨ files and folders can be dragged onto the PhotoStructure icon, or on Mac,
onto the menu bar icon, and the contents will be imported.</li>
</ul>
<h2 id="v020alpha">v0.2.0-alpha</h2>
<h3 id="released20190213">Released 2019-02-13</h3>
<ul>
<li><p>ğŸ’” <strong>Users must manually install VLC.</strong> See
<a href="https://support.photostructure.com/vlc-installation/">https://support.photostructure.com/vlc-installation/</a></p></li>
<li><p>ğŸ› On launch, if the prior library is not available, ask the user what to do
(quit, reset, try again). Previously launching would just quietly exit, which
was less than helpful.</p></li>
<li><p>ğŸ› Support library settings POST after library path is set</p></li>
<li><p>âœ¨ Errors from child processes are now propagated to the desktop app for display to
the user.</p></li>
<li><p>âœ¨ New system setting to allow users to opt out of error reporting (see <code>reportErrors</code>).</p></li>
<li><p>âœ¨ New system settings control sync behavior (see <code>startPaused</code> and <code>volumeResyncPeriodHours</code>)</p></li>
<li><p>âœ¨ New library settings to control file validation (see <code>validateImages</code> and
<code>validateVideos</code>). Validation slows synchronization, and video validation is
especially expensive. Given that videos can still play even with bitrot, the
default for videos is to do minimal validation (intact metadata and the
ability to extract a frame from the beginning of the video).</p></li>
<li><p>âœ¨ New library settings to control which images and videos are eligible for
library import (see <code>minImageDimension</code>, <code>minVideoDimension</code>,
<code>minFileSizeBytes</code>, and <code>maxFileSizeBytes</code>). For min dimension settings,
Images and videos must have both dimensions be greater than or equal to these
values. They default to 480 for images and 240 for videos.</p></li>
<li><p>âœ¨ New library settings to control what previews are created (see
<code>maxPreviewResolution</code>).</p></li>
<li><p>âœ¨ New system settings to manage when PhotoStructure checks for upgrades (see
<code>updateOnLaunch</code> and <code>updateCheckMinutes</code>, which work in concert with
<code>updateChannel</code>).</p></li>
<li><p>âœ¨ New system settings to manage how many CPUs PhotoStructure is allowed to
use (see <code>maxCpus</code>).</p></li>
<li><p>âœ¨ PhotoStructure work scheduling was restructured, which should result in
faster Asset processing, and should fix "stuck" synchronization.</p></li>
</ul>
<h2 id="v0115">v0.1.15</h2>
<h3 id="released201901262030">Released 2019-01-26 20:30</h3>
<ul>
<li>ğŸ› Library settings are properly read on re-launch</li>
<li>ğŸ› Fixed empty terminal shell spawning on windows</li>
</ul>
<h2 id="v0114">v0.1.14</h2>
<h3 id="released201901261400">Released 2019-01-26 14:00</h3>
<ul>
<li><p>ğŸ› Reverted back to Electron 3, as the system tray under linux was broken in
Electron 4.</p></li>
<li><p>ğŸ› Fixed nslookup error in remote mountpoint name resolutions</p></li>
</ul>
<h2 id="v0112">v0.1.12</h2>
<h3 id="released201901261202">Released 2019-01-26 12:02</h3>
<ul>
<li><p>âœ¨ Support for persisted system and library settings. Any external edits must be
done while PhotoStructure is shut down.</p>
<p>System settings paths:</p></li>
<li><p>Linux: <code>~/.config/PhotoStructure/settings.toml</code></p></li>
<li><p>Mac: <code>~/Library/Application Support/PhotoStructure/settings.toml</code></p></li>
<li><p>Windows: <code>%USERPROFILE%\AppData\Roaming\PhotoStructure\settings.toml</code></p>
<p>Library settings path: <code>$YOUR_LIBRARY/.photostructure/settings.toml</code></p></li>
<li><p>Settings are saved in <a href="https://github.com/toml-lang/toml">TOML</a>, which both
supports comments, and was designed for humans to both read and write.</p></li>
<li><p>PhotoStructure's updater now supports release channels (<code>latest</code>, or <code>beta</code>)
via your system settings.</p></li>
<li><p>A number of other system settings are exposed as well, including resolution of
<a href="https://gitlab.com/mceachen/photostructure/issues/53">#53</a>.</p></li>
</ul>
<h2 id="v0111">v0.1.11</h2>
<h3 id="released201901152101">Released 2019-01-15 21:01</h3>
<ul>
<li>Fixed <a href="https://github.com/lovell/sharp/issues/1522">ABI issue</a> caused by
Electron 4</li>
</ul>
<h2 id="v0110">v0.1.10</h2>
<h3 id="released201901151900">Released 2019-01-15 19:00</h3>
<ul>
<li>Rewrote volume detection to be async on Mac and Linux. This should help
prevent volumes "disappearing" and causing PhotoStructure to pause
synchronization of large external volumes.</li>
<li>Updated to Electron 4.0</li>
<li>Linux volumes include GVFS mounts, like SMB and AFS mounts via the Gnome Files
app</li>
<li>Breadcrumbs are included in Asset views</li>
<li>Hostname resolution supports more routers now</li>
<li>Reworked mountpoint scanning to use <code>diskutil</code>, <code>gio</code>, or <code>findmnt --poll</code>
(whatever is available), which gives us real-time mountpoint updates on Mac
and Linux. This <em>should</em> resolve the error where mountpoints can temporarily
disappear (according to <code>df</code>), which cancels synchronization on larger
volumes.</li>
</ul>
<h2 id="v018">v0.1.8</h2>
<h3 id="released20181219">Released 2018-12-19</h3>
<ul>
<li>First external beta test on Mac OS 10.13</li>
<li>Concurrent transcoding is serialized</li>
<li><code>df</code> information is shared across PhotoStructure processes, which should lower
system resource load</li>
<li>Phone selfies were being rejected by the image resolution filter. That
criteria has been dropped to allow these ~1MP images.</li>
<li>Progress per volume is isolated by separate message queues now.</li>
</ul>
<h2 id="v015">v0.1.5</h2>
<p>Released 2018-12-08</p>
<ul>
<li>Sync process can be paused and resumed via the tray/menu bar icon</li>
<li>videos are validated by ffmpeg before importing</li>
</ul>
<h2 id="v014">v0.1.4</h2>
<p>Released 2018-12-07</p>
<ul>
<li>Automatic update support for Mac and Windows</li>
<li>Automatic on-the-fly video transcoding for non-mp4 videos</li>
<li>Additional timezone offset heuristics are applied when missing from metadata
to prevent reverting to UTC</li>
<li>Advisory locking surrounding asset importing ensures consistent behavior on
multi-cpu hosts</li>
<li>Special characters in metadata fields are now supported</li>
</ul>
<h2 id="v004650">v0.0.46 - 50</h2>
<p>Performance improvements:</p>
<ul>
<li>Full-screen assets include the original image as a srcset value. This improves
rendering quality for smaller assets, and allows for zooming to 1:1 with the
original.</li>
<li>UHD 5K is now the largest resized preview value.</li>
<li>Preview sizes are skipped if they are not &gt; 2x smaller than other sizes. This
allows for more image sizes to capture different aspect ratio assets, but
doesn't increase the size of the PhotoStructure previews library.</li>
<li>PhotoStructure library assets are always scanned first on startup.</li>
<li>All thumbnails are lazy-loaded, which reduces load on the webserver when
libraries are large.</li>
<li>Large lists of thumbnails are loaded lazily now, as they scroll into view.</li>
<li>Large file imports deliver async progress to the sync service (to answer the
question "why is it stuck"? "Oh, it's a 5GB GoPro video, that I will most
definitely watch all of and warrant it taking up bajujibites of my HD." )</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>Vertical videos are rotated as expected</li>
<li>Movies from old digital cameras are included by PhotoStructure libraries now</li>
<li>Video streams now work across platforms and browsers (when the OS has the
correct codec)</li>
<li>Thumbnails for any given asset is generated from a single asset file version.</li>
<li>Internal RPC was rebuilt to support retries and error backpropogation</li>
</ul>
<h2 id="v0045">v0.0.45</h2>
<p>Released 2018-09-07</p>
<ul>
<li>Added support for fullscreen video streaming</li>
<li>Added web health check</li>
<li>Fixed sometimes-missing video thumbnails</li>
</ul>
<h2 id="v004144">v0.0.41 - 44</h2>
<p>Released 2018-09-05</p>
<ul>
<li>Dropped max filesize filter from 3gb to 1gb, given the asset processor timeout
is currently static, and large videos were making the asset importer hang</li>
<li>Fixed copy-file-to-library on mac, which was locking (?) the files. We
force-unlock the .wip immediately after copying now (which should be fine,
given that it's our copy of the file, so we aren't arbitrarily unlocking
files).</li>
<li><code>psvol</code>, <code>psnet</code>, and <code>pslib</code> URI protocols now handle root directories</li>
</ul>
<h2 id="v002040">v0.0.20 - 40</h2>
<ul>
<li>Work on auto-updating</li>
</ul>
<h2 id="v0019">v0.0.19</h2>
<p>Released 2018-08-27</p>
<ul>
<li>Auto-update available through the Tray</li>
<li>Only half the system CPUs will be spawned for <code>sync-file</code> to reduce memory
footprint</li>
<li>Directory statistics are stored by URI, which is stable regardless of the
mountpoint or drive letter, rather than path.</li>
<li>Internal volume information is gathered with more robust stdout streaming, and
retries and timeouts were added, all of which should make it more reliable.</li>
<li>Upgrade to Electron 3.0 (comes with new node 10.2)</li>
<li>ExifTool warnings don't reject tag promises anymore</li>
<li>CapturedAt interpolation now takes into account the fellow siblings that also
don't have metadata in order to maintain existing sort order</li>
</ul>
</body>
</html>
