/**
 * Copyright © 2026, PhotoStructure Inc. All rights reserved.
 *
 * BY USING THIS SOFTWARE, YOU ACCEPT ALL OF THE TERMS IN
 * https://photostructure.com/eula
 * IF YOU DO NOT ACCEPT THESE TERMS, DO NOT USE THIS SOFTWARE
 */
import{b as D,c as E,Y as F,w as L,Z as U,v as M,t as W,j as G}from"./Blank.js";import{q as K}from"./fe.js";import{k as O}from"./StickyHeader.js";import{z as Q,h as q,A as w}from"./app.js";import{h as R}from"./Lazy.js";import{_ as x}from"./DropDown.vue_vue_type_script_setup_true_lang.js";import{d as A,c as o,k as l,E as i,F as I,j as r,_,B as s,z as Y,m as h,g,l as p,t as d,u as Z,P as H,Q as T,A as v}from"./Touch.js";const J="(PLUS only)",X=new Map([[" ","spacebar"],["-","minus"],["+","plus"],["left","left cursor"],["right","right cursor"],["backspace",O()?"delete":"backspace"]]),b=" ",S="(",tt=")";function et(t){{const e=X.get(t);if(e!=null)return e}return t!==t.toLowerCase()&&t===t.toUpperCase()?"Shift + "+t:t}function yt(){for(const t of K("[data-key],[data-key2],[data-key3]")){if(D(t.title)||t.title.endsWith(J))continue;const e=E(t.title).split(b).filter(n=>!n.startsWith(S));F(L([t.dataset.key,t.dataset.key2,t.dataset.key3]),n=>{e.push(S+U(n.map(et))+tt)}),t.title=e.join(b)}}const at={class:"home no-drag"},st=A({__name:"HomeButton",props:{replace:{type:Boolean}},setup(t){const e=q(),n=o(()=>Q(e.query));return(k,f)=>{const y=I("router-link");return s(),l("li",at,[i(y,{to:n.value,"data-key":"h",title:"Home",class:"vicon",replace:t.replace},{default:r(()=>[i(_,{icon:"logo"})]),_:1},8,["to","replace"])])}}}),ot={key:1,class:"overflow-nav"},nt={key:2,class:"pathname"},lt={key:0,class:"info hide-on-s"},rt={key:3,class:"child-nav"},ct={class:"child-grid"},kt=A({__name:"TagBreadcrumb",props:{tagPath:{},displayPath:{},assetCount:{},allChildren:{},startIndex:{},includeHomeButton:{type:Boolean},noSticky:{type:Boolean},replace:{type:Boolean}},setup(t){const e=t,n=q(),k=o(()=>M(e.startIndex)??0),f=o(()=>W(e.displayPath).slice(k.value));function y(a){return w(e.tagPath.slice(0,k.value+a+1),n.query,e.includeHomeButton===!0&&a===e.tagPath.length-1)}const N=o(()=>G(e.allChildren)),B=o(()=>e.displayPath.join("/")),j=o(()=>B.value?`Children of ${B.value}`:"Browse by");function V(a){return w([...e.tagPath,a],n.query,!0)}const C=o(()=>{if(!e.includeHomeButton)return[];const a=f.value;return a.length<=1?[]:a.slice(0,a.length-1).map((u,m)=>({display:u,index:m}))}),$=o(()=>C.value.length>0),P=o(()=>{const a=f.value;return a.length>0?a[a.length-1]:void 0}),z=o(()=>f.value.length-1);return(a,u)=>{const m=I("router-link");return s(),l("div",{class:Y({crumb:!0,"no-drag":!0,"user-select-text":!0,sticky:!t.noSticky})},[h("ol",null,[t.includeHomeButton?(s(),g(st,{key:0,replace:t.replace},null,8,["replace"])):p("",!0),$.value?(s(),l("li",ot,[i(x,{title:"Show full path"},{dropdown:r(()=>[u[1]||(u[1]=h("h4",null,"Ancestors",-1)),(s(!0),l(H,null,T(C.value,c=>(s(),g(m,{key:"ancestor-"+c.index,to:y(c.index),class:"ancestor-link"},{default:r(()=>[v(d(c.display),1),u[0]||(u[0]=h("span",{class:"path-sep"},"/",-1))]),_:2},1032,["to"]))),128))]),default:r(()=>[i(_,{icon:"more_horiz"})]),_:1})])):p("",!0),P.value?(s(),l("li",nt,[i(m,{class:"link","data-key":t.includeHomeButton?"w":void 0,to:y(z.value),replace:t.replace,title:"View assets tagged with "+t.displayPath.join(" / ")},{default:r(()=>[v(d(P.value),1)]),_:1},8,["data-key","to","replace","title"]),t.assetCount!=null?(s(),l("span",lt,d(Z(R)(t.assetCount))+" "+d(t.assetCount==1?"asset":"assets"),1)):p("",!0)])):p("",!0),N.value&&t.includeHomeButton?(s(),l("li",rt,[i(x,{title:"Browse child tags"},{dropdown:r(()=>[h("h4",null,d(j.value),1),h("div",ct,[(s(!0),l(H,null,T(t.allChildren,c=>(s(),g(m,{key:c.name,to:V(c.name)},{default:r(()=>[v(d(c.display),1)]),_:2},1032,["to"]))),128))])]),default:r(()=>[i(_,{icon:"expand_more"})]),_:1})])):p("",!0)])],2)}}});export{J as P,kt as _,yt as a};
