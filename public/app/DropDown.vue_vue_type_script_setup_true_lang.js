/**
 * Copyright Â© 2026, PhotoStructure Inc. All rights reserved.
 *
 * BY USING THIS SOFTWARE, YOU ACCEPT ALL OF THE TERMS IN
 * https://photostructure.com/eula
 * IF YOU DO NOT ACCEPT THESE TERMS, DO NOT USE THIS SOFTWARE
 */
import{d as W,r as u,c as w,w as z,W as R,k as d,m as y,a2 as b,a9 as k,E as _,T as E,j as T,l as f,o as V,z as j,S as P,B as v}from"./Touch.js";const U=["title"],A={class:"dropdown"},F=W({__name:"DropDown",props:{title:{}},setup(x){const h=u(null),o=u(null),s=u(!1),c=u(""),a=u(!1),n=u(!1);let p=0,r=0,m;const C=w(()=>({opacity:s.value?0:1})),L=w(()=>a.value?"slide-up":"ani-slide");function M(){const e=window.innerWidth<540;return!P()||e}z(s,e=>{e?document.body.classList.add("modal-shown"):document.body.classList.remove("modal-shown")});function S(){if(s.value)return;const e=h.value;if(e!=null){if(a.value=M(),a.value)c.value="";else{const t=e.getBoundingClientRect(),i=[],g=350,Y=225,$=window.innerHeight-t.bottom,H=t.top;$>=g?i.push(`top:${Math.round(t.top)}px`):H>=g?i.push(`bottom:${Math.round(window.innerHeight-t.bottom)}px`):i.push("bottom:16px"),window.innerWidth-t.left>=Y+16?i.push(`left:${Math.round(t.left)}px`):i.push("right:16px"),c.value=i.join(";")}s.value=!0,m=setTimeout(()=>document.body.addEventListener("click",l,{once:!0,passive:!0}),10)}}function l(e){if(e?.target instanceof HTMLElement&&o.value?.contains(e.target)){const t=e.target.tagName.toLowerCase();if(t==="input"||t==="textarea"||t==="select"){document.body.addEventListener("click",l,{once:!0,passive:!0});return}}s.value=!1,c.value="",n.value=!1,document.body.removeEventListener("click",l)}function B(e){a.value&&(n.value=!0,p=e.touches[0].clientY,r=0)}function N(e){if(!n.value||o.value==null)return;const t=e.touches[0].clientY-p;r=Math.max(0,t),o.value.style.transform=`translateY(${r}px)`}function D(){if(!n.value||o.value==null)return;n.value=!1;const e=o.value.offsetHeight*.3;r>e?l():o.value.style.transform="",r=0}return R(()=>{m!=null&&clearTimeout(m),document.body.removeEventListener("click",l),document.body.classList.remove("modal-shown")}),(e,t)=>(v(),d("span",{ref_key:"rootEl",ref:h,class:"user-select-none"},[y("a",{onClick:S,class:"vicon",title:x.title,style:b(C.value)},[k(e.$slots,"default")],12,U),y("div",A,[_(E,{name:"fade"},{default:T(()=>[s.value?(v(),d("div",{key:0,class:"scrim",onClick:V(l,["stop"]),title:"Tap to dismiss the menu","data-key0":"esc"})):f("",!0)]),_:1}),_(E,{name:L.value},{default:T(()=>[s.value?(v(),d("div",{key:0,ref_key:"dialogEl",ref:o,class:j(["dialog",{"bottom-sheet":a.value,dragging:n.value}]),style:b(c.value)},[a.value?(v(),d("div",{key:0,class:"sheet-handle",onTouchstartPassive:B,onTouchmovePassive:N,onTouchend:D},null,32)):f("",!0),k(e.$slots,"dropdown")],6)):f("",!0)]),_:3},8,["name"])])],512))}});export{F as _};
