/**
 * Copyright Â© 2026, PhotoStructure Inc. All rights reserved.
 *
 * BY USING THIS SOFTWARE, YOU ACCEPT ALL OF THE TERMS IN
 * https://photostructure.com/eula
 * IF YOU DO NOT ACCEPT THESE TERMS, DO NOT USE THIS SOFTWARE
 */
import{N as _,c as $,O as V,P as Y,o as R,b as S,L as j,Q as h,R as P,C as I,S as C,T as z,l as D,E as k}from"./Blank.js";import{a as H,m as J}from"./Maybe.js";const p={};function U(t,n){if(n<1)return"";if(!V(p[t]?.length,n)){let r=p[t]??t;for(;r.length<n;)r+=t;p[t]=r}return p[t].substring(0,n)}function E(t,n,r){if(r.length===0)throw new Error("leftPad() given empty pad");if(_(t,0))return"-"+E(String(Math.abs(t)),n-1,r);const i=$(t);return U(r,n-i.length)+i}function q(t,n){return E(R(t)?Y(t):"0",n,"0")}function b(t){return q(t,2)}const x=new Map([["child","children"],["photo","photos"],["video","videos"]]),G=/([sxz]|ss|sh|ch)$/,K=/[^aeiou]y$/,Q=/[aeiou]y$/,B=/is$/;function W(t){if(S(t))return t;const n=x.get(t);return n??(t.match(G)!=null?t+"es":t.match(K)!=null?t.replace(/y$/i,"ies"):t.match(Q)!=null?t+"s":t.endsWith("o")?t+"es":t.match(B)!=null?t.replace(B,"es"):t+"s")}function O(...t){const n=Object.freeze(t),r=new Map(n.map(e=>[e.toLowerCase(),e])),i=j(n.map((e,s)=>[e,s])),a={};for(const e of n)a[e]=e;const c=e=>e==null?void 0:r.get(e?.toLowerCase()),o=e=>e!=null?i[e]:void 0,f=e=>o(e)!=null,u=e=>e==null?void 0:f(e)?e:c(e);return{...a,values:n,length:n.length,has:f,includes:f,getCI:c,pick:(...e)=>n.filter(s=>e.includes(s)),omit:(...e)=>n.filter(s=>!e.includes(s)),indexOf:o,ordinal:e=>o(e)??n.length,toValid:u,firstValid:(...e)=>{for(const s of e){const l=u(s);if(l!=null)return l}},mapValid:(e,s)=>f(e)?s(e):void 0,cmp:(e,s)=>{const l=o(e),d=o(s);return l==null||d==null?void 0:l>d?1:l<d?-1:0},lt:(e,s)=>o(e)<o(s),next:e=>{const s=o(e);return s==null?void 0:n[s]},toReversed:()=>O(...[...n].reverse()),[Symbol.iterator]:()=>n[Symbol.iterator]()}}const T=h(()=>new Intl.NumberFormat);h(()=>P(T().format(1111),"1","").charAt(0));h(()=>P(T().format(1.1),"1","").charAt(0));function F(t){return T().format(t)}const Z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function lt(t,n=3){if(t===0)return"0";if(!R(t))return"-";const r=Math.floor(Math.log10(t)),i=Math.floor(r/3),a=Math.pow(10,i*3),c=Z[i];return I(t/a,n)+" "+c}const X=1e6;function ft(t){return I(t/X,2)}O("tiny","small","medium","large","original");function m(t,n,r){return t==null?"":S(n)?F(t):(t===0?"no":F(t))+" "+(t===1?n:W(n).trim())}const w=1e3,y=60*w,g=60*y,v=24*g,L=7*v,N=365.25*v,tt=h(()=>new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),nt=h(()=>new Intl.DateTimeFormat(void 0,{day:"numeric",year:"numeric",month:"short"}));function et(t){if(t!=null)return t instanceof Date&&t.getHours()===0&&t.getMinutes()===0&&t.getSeconds()===0?nt().format(t):tt().format(t)}function mt(t){return H(/^[0:]{1,4}/.exec(t),n=>[n[0],t.slice(n[0].length)],()=>["",t])}function ot(t){return t instanceof Date&&!isNaN(t.getTime())}function dt(){return new Date().getFullYear()}function ht(t){const n=ot(t)?t:new Date(t);return n.getFullYear()+"-"+b(n.getMonth()+1)+"-"+b(n.getDate())}function rt(t){if(t==null||t<0)return;let n=t;const r=()=>{const s=n%100;return n=Math.floor(n/100),s},i=10*r(),a=r(),c=r(),o=r(),f=r(),u=r(),e=n;return new Date(e,u-1,f,o,c,a,i)}function pt(t){return J(rt(t),et)}function vt(t,n="ago"){return t<1e3?"just now":(n=S(n)?"":C(n," "),t<y?m(Math.floor(t/w),"second")+n:t<g?m(Math.floor(t/y),"minute")+n:t<v?m(Math.floor(t/g),"hour")+n:t<L?m(Math.floor(t/v),"day")+n:t<N?m(Math.floor(t/L),"week")+n:m(Math.floor(t/N),"year")+n)}const M=globalThis,ut=typeof M?.window=="object"&&typeof M?.document=="object",A=typeof M?.process?.versions?.node=="string";function it(t,n=!0){return new Promise(r=>{if(t<=0)r();else{const i=setTimeout(()=>r(),Math.ceil(t+.5));t>w&&n&&A&&i.unref?.()}})}function wt(t,n=1){const r=Math.max(1,Math.ceil(n)),i=A&&r<=1?setImmediate(t):setTimeout(t,r);return ut||n<=w?i:z(i,"unref")??i}function st(t,n){const r=setTimeout(t,n);return z(r,"unref")??r}function yt(t,n){let r,i,a=null;const c=[];function o(){return o.isStale()&&o.setResult(t()),i}async function f(u,e){if(e!==i)return;const s=await u,l=await e;if(a=l,c.length>0&&!k(s,l))for(const d of c)d(l);n!=null&&n>0&&l!==void 0&&st(()=>o.vacuum(),n)}return o.vacuum=function(){o.isStale()&&o.unset()},o.setResult=function(e){const s=i;return r=Date.now(),i=e,a=null,f(s,e),e},o.isStale=function(){return r==null||D(n)&&r+n<=Date.now()},o.set=function(e){o.setResult(e)},o.unset=function(){o.setResult(void 0),r=void 0,a=null},o.clear=function(){const e=i;return o.unset(),e},o.prior=function(){return o.vacuum(),i},o.priorSync=function(){return o.vacuum(),a},o.refresh=function(){return o.setResult(t())},o.ttl=function(){return n},o.setTTL=function(e){n=D(e)?e:void 0},o.watch=function(e){e(o()),it(1).then(()=>c.push(e))},o.watchLater=function(e){c.push(e)},o.toString=function(){return"[Lazy]"},o.toJSON=function(){},o.lastSetAgoMs=function(){return r==null?void 0:Date.now()-r},o.hasPrior=function(){return r!=null},o.setFn=function(e){t=e,o.unset()},o}export{w as a,wt as b,vt as c,it as d,mt as e,pt as f,lt as g,F as h,ht as i,yt as l,ft as m,O as s,dt as t,L as w,N as y};
