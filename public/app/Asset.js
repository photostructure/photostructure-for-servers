/**
 * Copyright © 2026, PhotoStructure Inc. All rights reserved.
 *
 * BY USING THIS SOFTWARE, YOU ACCEPT ALL OF THE TERMS IN
 * https://photostructure.com/eula
 * IF YOU DO NOT ACCEPT THESE TERMS, DO NOT USE THIS SOFTWARE
 */
import{d as se,D as de,f as re,c as b,k as t,m as o,E as i,u as a,l as n,_ as d,t as u,j as L,A as P,B as e,g as R,P as j,Q as M,F as Ie,z as _e,r as G,w as ae,U as Ce,a4 as Pe,a5 as $e,a6 as xe,W as Te,q as Re,a7 as Fe,a3 as oe,C as ee}from"./Touch.js";import{P as De,_ as ue,a as Le}from"./TagBreadcrumb.vue_vue_type_script_setup_true_lang.js";import{n as te,l as ce,j as fe,E as he,T as ve,o as je,M as Me,X as me}from"./Blank.js";import{e as Ve,m as Ue,g as ze,b as Be}from"./Lazy.js";import{m as J}from"./Maybe.js";import{e as Ee,f as ye,g as ke,h as Oe,t as We,j as ne}from"./StickyHeader.js";import{_ as ie,t as He}from"./AssetThumb.vue_vue_type_script_setup_true_lang.js";import{b as Y,p as Ae,q as Ne,r as pe,s as Ze,v as qe,h as Ke,w as Qe,x as Xe,y as Ge}from"./app.js";import{_ as be}from"./DropDown.vue_vue_type_script_setup_true_lang.js";import{_ as Je,a as Ye,b as et}from"./NavMenuButton.vue_vue_type_script_setup_true_lang.js";import{s as ge}from"./fe.js";import"./Random.js";function tt(s){return J(s?.afterAssetId,m=>({name:"asset",params:{assetId:Y(m)},query:{from:"prev",priorAssetId:String(s?.assetId)}}))}function st(s){return J(s?.beforeAssetId,m=>({name:"asset",params:{assetId:Y(m)},query:{from:"next",priorAssetId:String(s?.assetId)}}))}function le(){return typeof globalThis.navigator?.share=="function"}function we(){return Ee()?"share_ios":"share"}const at={class:"hide-on-idle asset-header left-middle-right"},ot={class:"no-drag left"},nt={class:"right ml2em"},it={class:"crumb no-drag hide-on-m hide-on-l-info"},lt=["href","title","download"],rt=["title"],dt=["title","data-state"],ut=["title","data-state"],ct=["title","data-state"],ft=["href","title","download"],ht={class:"description"},vt=["title"],mt=["title"],yt={key:0,class:"details hide-on-s"},kt=["title"],pt={key:0,class:"details hide-on-s"},gt=["title"],wt={key:0,class:"details hide-on-s"},It=se({__name:"AssetHeader",emits:["resync"],setup(s,{emit:m}){const h=m,_=Ae(),k=Ne(),w=de(),{asset:v,showInfo:q,scalePercent:K,description:E}=re(_),{lite:O}=re(k),C=b(()=>v.value?.liked===!0),A=b(()=>v.value?.hidden===!0),S=b(()=>v.value?.excluded===!0),$=b(()=>v.value?.deleted===!0),g=b(()=>O.value?`
`+De:"");function V(){return O.value?(w.show({text:"This is a PhotoStructure Plus feature",type:"info"}),!1):!0}function F(f){if(V())return _.save(f)}async function U(f,I){if(!V())return;const x=v.value;if(x==null)return;const Q=x[f],X={};X[f]=!Q,await _.save(X),Q!==!0&&w.show({text:I,type:"success",timeout:5e3})}function W(f){_.addToRotation(f?.shiftKey===!0?90:-90)}function H(){_.addToRotation(90)}function z(){_.onZoomIn()}function N(){_.onZoomOut()}function Z(){return F({liked:!C.value})}function l(){return U("hidden",`${E.value} added to archive.`)}function c(){return U("excluded",`${E.value} marked for removal.`)}function D(){return U("deleted",`${E.value} marked for deletion.`)}async function r(){const f=v.value?.assetId;if(f==null){w.show({type:"warning",text:"Internal error: no current Asset"});return}if(!le()){w.show({type:"warning",text:"Share is not enabled on this browser"});return}const I="/img/"+f+"/fit/2000";try{const x=await fetch(I),Q=await x.blob(),X=x.headers.get("X-basename"),y=new File([Q],X??"image.jpg",{type:"image/jpeg"});return navigator?.share({files:[y]})}catch(x){w.show({type:"error",text:"Failed to download and share asset",details:x instanceof Error?x.message:String(x)})}}return(f,I)=>(e(),t("header",at,[o("div",ot,[i(Je),i(Ye)]),i(ue,{tagPath:a(v)?.contextTag?.tagPath??[],displayPath:a(v)?.contextTag?.displayPath??[],includeHomeButton:!0,noSticky:!0,replace:!0},null,8,["tagPath","displayPath"]),o("div",nt,[o("a",{title:"Zoom out",class:"vicon no-drag hide-on-m","data-key":"-","data-key2":"_",onClick:N},[i(d,{icon:"loupe_minus"})]),o("div",it,u(a(K)),1),o("a",{title:"Zoom in",class:"vicon no-drag hide-on-m","data-key":"+","data-key2":"=",onClick:z},[i(d,{icon:"loupe"})]),i(et),a(le)()?(e(),t("a",{key:0,class:"vicon no-drag hide-on-s hide-on-l-info",onClick:r,title:"Share this asset"},[i(d,{icon:a(we)()},null,8,["icon"])])):n("",!0),a(v)?.downloadable?(e(),t("a",{key:1,class:"vicon no-drag hide-on-s hide-on-l-info",href:a(v).downloadable.href,title:a(v).downloadable.title,download:a(v).downloadable.basename},[i(d,{icon:"download"})],8,lt)):n("",!0),o("a",{title:(C.value?"Unlike":"Like")+g.value,class:"vicon no-drag hide-on-s hide-on-l-info","data-key":"*","data-key2":"l",onClick:Z},[i(d,{icon:C.value?"favorite":"favorite_border"},null,8,["icon"])],8,rt),o("a",{title:"Rotate 90° counter-clockwise",class:"vicon no-drag hide-on-m hide-on-l-info","data-key":"r",onClick:W},[i(d,{icon:"rotate_left"})]),o("a",{title:(A.value?"Unarchive":"Archive")+g.value,class:"vicon no-drag hide-on-m hide-on-l-info","data-key":"A",id:"asset-header-hidden","data-state":A.value?"hidden":"not-hidden",onClick:l},[i(d,{icon:A.value?"unarchive":"archive"},null,8,["icon"])],8,dt),a(ye)()?(e(),t("a",{key:2,title:(S.value?"Don't remove from library":"Remove from library")+g.value,class:"vicon no-drag hide-on-l hide-on-l-info","data-key":"R",id:"asset-header-excluded","data-state":S.value?"excluded":"not-excluded",onClick:c},[i(d,{icon:S.value?"library_add_filled":"library_remove"},null,8,["icon"])],8,ut)):n("",!0),a(ke)()?(e(),t("a",{key:3,title:($.value?"Restore from trash":"Delete")+g.value,class:"vicon no-drag hide-on-m hide-on-l-info","data-key":"#","data-key2":"T",id:"asset-header-deleted","data-state":$.value?"deleted":"not-deleted",onClick:D},[i(d,{icon:$.value?"trash_restore":"trash"},null,8,["icon"])],8,ct)):n("",!0),i(be,{class:"a-op no-drag",title:"Asset operations"},{dropdown:L(()=>[a(le)()?(e(),t("a",{key:0,onClick:r,title:"Share this asset"},[i(d,{icon:a(we)()},null,8,["icon"]),I[2]||(I[2]=o("span",null,"Share this URL",-1))])):n("",!0),a(v)?.downloadable?(e(),t("a",{key:1,href:a(v).downloadable.href,title:a(v).downloadable.title,download:a(v).downloadable.basename},[i(d,{icon:"download"}),o("span",ht,u(a(v).downloadable.description),1)],8,ft)):n("",!0),o("a",{title:(C.value?"Unlike":"Like")+g.value,onClick:Z},[i(d,{icon:C.value?"favorite":"favorite_border"},null,8,["icon"]),o("span",null,u(C.value?"Unlike":"Like"),1)],8,vt),o("a",{title:"Rotate 90° counter-clockwise",onClick:W},[i(d,{icon:"rotate_left"}),I[3]||(I[3]=o("span",null,"Rotate 90° left",-1))]),o("a",{title:"Rotate 90° clockwise",onClick:H},[i(d,{icon:"rotate_right"}),I[4]||(I[4]=o("span",null,"Rotate 90° right",-1))]),o("a",{title:"Re-import all the files for this asset",onClick:I[0]||(I[0]=x=>h("resync")),"data-key":"r"},[i(d,{icon:"sync_alt"}),I[5]||(I[5]=o("span",null,"Re-sync this asset",-1))]),I[6]||(I[6]=o("hr",null,null,-1)),a(Oe)()||A.value?(e(),t("a",{key:2,title:`Archived assets remain on disk and the library,
but are hidden from thumbnail views and most searches.`+g.value,onClick:l},[i(d,{icon:A.value?"unarchive":"archive"},null,8,["icon"]),o("span",null,[P(u(A.value?"Unarchive":"Archive")+" ",1),A.value?n("",!0):(e(),t("div",yt," Hide from thumbnail views "))])],8,mt)):n("",!0),a(ye)()||S.value?(e(),t("a",{key:3,title:"Removed assets are removed from this library but the files remain on disk."+g.value,onClick:c},[i(d,{icon:S.value?"library_add_filled":"library_remove"},null,8,["icon"]),o("span",null,[P(u(S.value?"Don't remove from library":"Remove from library")+" ",1),S.value?n("",!0):(e(),t("div",pt," Files on disk are retained "))])],8,kt)):n("",!0),a(ke)()||$.value?(e(),t("a",{key:4,title:"Deleted assets are removed from this library AND from disk."+g.value,onClick:D},[i(d,{icon:$.value?"trash_restore":"trash"},null,8,["icon"]),o("span",null,[P(u($.value?"Restore from trash":"Delete")+" ",1),$.value?n("",!0):(e(),t("div",wt," Files on disk are deleted "))])],8,gt)):n("",!0)]),default:L(()=>[i(d,{icon:"more_vert"})]),_:1}),a(q)?n("",!0):(e(),t("a",{key:4,title:"Show info",class:"vicon no-drag","data-key":"i",onClick:I[1]||(I[1]=x=>a(_).setShowInfo(!0))},[i(d,{icon:"info"})]))])]))}}),_t={class:"asset-info reveal hide-on-idle"},At={key:0,class:"loading reveal"},bt={key:0},St={key:0,title:"Captured at"},Ct={key:1,class:"captured-at"},Pt={key:1},$t={key:2,class:"captured-at-time"},xt={key:0,class:"tz"},Tt={key:2,title:"Camera"},Rt={key:0,class:"camera-make-model"},Ft={key:1,class:"make"},Dt={key:3,class:"model"},Lt={key:1,class:"details"},jt={key:0,title:"Focal length"},Mt={key:1,title:'Aperture, or "F number"'},Vt={key:2,title:"Shutter speed"},Ut={key:3,title:"Film sensitivity"},zt={key:3,title:"Video"},Bt={key:4},Et={key:0,title:"Video duration"},Ot={class:"grey"},Wt={key:1,title:"Frames per second"},Ht={class:"fps"},Nt={key:5,title:"Tags"},Zt={key:6},qt={class:"crumbs chips"},Kt=["onClick"],Qt=["onClick"],Xt={class:"native-path break-word"},Gt={class:"path-sep"},Jt=["title"],Yt={class:"dimensions"},es={class:"mimetype"},ts={class:"fileSize"},ss={key:0,class:"selected"},as=["href","title"],os=["onClick"],ns=["href","title","download"],is={class:"description"},ls={key:0,class:"details"},rs=se({__name:"AssetInfo",props:{assetId:{},info:{},previewAf:{}},emits:["hide-info","preview-af"],setup(s,{emit:m}){const h=s,_=m,k=Ke(),w=de();function v(l){return qe(l,k.query)}function q(l){return{pathname:!0,selected:he(l,h.previewAf),missing:!l.exists}}function K(l){const c=[];return l?.createdAtLocale!=null&&c.push("First imported "+l.createdAtLocale),l?.updatedAtLocale!=null&&l?.createdAtLocale!==l.updatedAtLocale&&c.push("Last synced "+l.updatedAtLocale),c.push(l?.exists?"Click to toggle showing this file":"This file is missing"),c.join(`
`)}function E(l){return O(l)==null?void 0:l.exists?`Open ${C(l)?"video":"photo"} in folder`:"(file is missing)"}function O(l){return h.info?.showOpenFile&&l?.exists?`/api/openAssetFile/${l.assetFileId}`:void 0}function C(l){return l?.mimetype?.startsWith("video/")}function A(){return navigator?.clipboard?.writeText!=null}async function S(l){try{await navigator.clipboard.writeText(l),w.show({text:"Copied "+l,type:"info",timeout:2e3})}catch(c){w.show({text:"Failed to copy "+l,type:"error",details:c instanceof Error?c.message:String(c)})}}const $=b(()=>h.info?.tags.find(l=>l.tagPath[0]===pe.When)),g=b(()=>J($.value,l=>l.tagPath)),V=b(()=>h.info?.tags.find(l=>l.tagPath[0]===pe.Camera)),F=b(()=>V.value?.tagPath),U=b(()=>te(h.info?.make)||te(h.info?.model)),W=b(()=>te(h.info?.focalLength)||ce(h.info?.aperture)||te(h.info?.shutterSpeed)||ce(h.info?.iso)),H=b(()=>h.info?.durationHMS!=null),z=b(()=>J(h.info,l=>J(l.durationHMS,Ve))),N=b(()=>h.info?.tags.filter(Ze)??[]),Z=b(()=>fe(N.value));return(l,c)=>{const D=Ie("router-link");return e(),t("article",_t,[o("div",null,[o("h3",null,[c[1]||(c[1]=P(" Info ",-1)),s.info==null||s.assetId!=s.info.assetId?(e(),t("span",At,[i(d,{icon:"busy"})])):n("",!0)]),o("a",{class:"right vicon close",title:"Close info",onClick:c[0]||(c[0]=r=>_("hide-info")),"data-key":"i","data-key2":"esc"},[i(d,{icon:"close"})]),s.info&&s.assetId==s.info.assetId?(e(),t("dl",bt,[s.info.capturedAtDate?(e(),t("dt",St,[i(d,{icon:"today"})])):n("",!0),s.info.capturedAtDate?(e(),t("dd",Ct,[g.value?(e(),R(D,{key:0,class:"link",to:v("/tag/"+g.value.join("/"))},{default:L(()=>[P(u(s.info.capturedAtDate),1)]),_:1},8,["to"])):(e(),t("span",Pt,u(s.info.capturedAtDate),1)),s.info.capturedAtTime?(e(),t("div",$t,[P(u(s.info.capturedAtTime),1),s.info.capturedAtTz?(e(),t("span",xt,u(s.info.capturedAtTz),1)):n("",!0)])):n("",!0)])):n("",!0),U.value||W.value?(e(),t("dt",Tt,[i(d,{icon:"photo_camera"})])):n("",!0),o("dd",null,[U.value?(e(),t("div",Rt,[F.value&&F.value.length>=2?(e(),R(D,{key:0,class:"link make",to:v("/tag/"+F.value.slice(0,2).join("/")),title:"View all assets from "+s.info.make},{default:L(()=>[P(u(s.info.make),1)]),_:1},8,["to","title"])):s.info.make?(e(),t("span",Ft,u(s.info.make),1)):n("",!0),P(u(s.info.make&&s.info.model?" ":""),1),F.value&&F.value.length>=3?(e(),R(D,{key:2,class:"link model",to:v("/tag/"+F.value.slice(0,3).join("/")),title:"View all assets from "+s.info.make+" "+s.info.model},{default:L(()=>[P(u(s.info.model),1)]),_:1},8,["to","title"])):s.info.model?(e(),t("span",Dt,u(s.info.model),1)):n("",!0)])):n("",!0),W.value?(e(),t("div",Lt,[s.info.focalLength?(e(),t("span",jt,u(s.info.focalLength),1)):n("",!0),s.info.aperture?(e(),t("span",Mt,"ƒ/"+u(s.info.aperture),1)):n("",!0),s.info.shutterSpeed?(e(),t("span",Vt,u(s.info.shutterSpeed)+" sec",1)):n("",!0),s.info.iso?(e(),t("span",Ut,"ISO "+u(s.info.iso),1)):n("",!0)])):n("",!0)]),H.value?(e(),t("dt",zt,[i(d,{icon:"videocam"})])):n("",!0),H.value?(e(),t("dd",Bt,[z.value?(e(),t("span",Et,[c[2]||(c[2]=P(" Duration: ",-1)),o("span",Ot,u(z.value[0]),1),P(u(z.value[1]),1)])):n("",!0),s.info.fps?(e(),t("div",Wt,[c[3]||(c[3]=P(" FPS: ",-1)),o("span",Ht,u(s.info.fps),1)])):n("",!0)])):n("",!0),Z.value?(e(),t("dt",Nt,[i(d,{icon:"label"})])):n("",!0),Z.value?(e(),t("dd",Zt,[o("div",qt,[(e(!0),t(j,null,M(N.value,r=>(e(),R(ue,{key:s.info.assetId+":info:"+r.tagId,tagPath:r.tagPath,displayPath:r.displayPath},null,8,["tagPath","displayPath"]))),128))])])):n("",!0),(e(!0),t(j,null,M(s.info.files,r=>(e(),t(j,{key:r.assetFileId},[o("dt",{onClick:f=>r.exists&&_("preview-af",r),title:"Show this variant"},[i(d,{icon:r.exists?C(r)?"movie":"photo":"broken_image"},null,8,["icon"])],8,Kt),o("dd",{class:_e(q(r)),onClick:f=>r.exists&&_("preview-af",r),title:"Show this variant"},[o("div",Xt,[(e(!0),t(j,null,M(r.pathElements,f=>(e(),t("span",{key:f.tagPath.join("/")},[i(D,{class:"link",to:"/tag/"+f.tagPath.map(encodeURIComponent).join("/"),title:"View assets found in "+f.tagPath.join(r.pathSep)},{default:L(()=>[P(u(f.displayName),1)]),_:2},1032,["to","title"]),o("span",Gt,u(r.pathSep),1),c[4]||(c[4]=o("wbr",null,null,-1))]))),128)),o("span",{title:K(r)},u(r.nativePathSuffix),9,Jt)]),o("span",Yt,u(a(Ue)(r.width*r.height))+" MP ("+u(a(Qe)(r).replace(/ /g," "))+") ",1),o("span",es,u(r.mimetype),1),o("span",ts,u(a(ze)(r.fileSize).replace(/ /g," ")),1),a(he)(r,s.previewAf)?(e(),t("span",ss,"(shown)")):n("",!0)],10,Qt),s.info.showOpenFile&&r.exists||a(fe)(r.downloadables)?(e(),R(be,{key:0,class:"af-op",id:"af-op:"+r.assetFileId,title:"File operations"},{dropdown:L(()=>[s.info.showOpenFile&&r.exists?(e(),t("a",{key:0,href:O(r),title:E(r)},[i(d,{icon:"launch"}),c[5]||(c[5]=o("span",null,"Show file in folder",-1))],8,as)):n("",!0),A()?(e(),t("a",{key:1,onClick:f=>S(r.nativePath),title:"Copy the native path of this file into your clipboard"},[i(d,{icon:"content_paste"}),c[6]||(c[6]=o("span",null,"Copy path",-1))],8,os)):n("",!0),(e(!0),t(j,null,M(r.downloadables,f=>(e(),t("a",{key:f.href,href:f.href,title:f.title,download:f.basename},[i(d,{icon:"download"}),o("span",is,[P(u(f.description)+" ",1),f.details?(e(),t("div",ls,u(f.details),1)):n("",!0)])],8,ns))),128))]),default:L(()=>[i(d,{icon:"more_vert"})]),_:2},1032,["id"])):n("",!0)],64))),128))])):n("",!0)])])}}}),ds={class:"streams"},us={class:"crumbs chips"},cs={class:"gallery"},fs=se({__name:"AssetStreams",props:{assetStreams:{},assetId:{}},setup(s){return(m,h)=>(e(),t("div",ds,[(e(!0),t(j,null,M(s.assetStreams,(_,k)=>(e(),t("div",{class:"stream",key:s.assetId+":"+_.tags[0].tagId},[o("div",us,[(e(!0),t(j,null,M(_.tags,w=>(e(),R(ue,{key:s.assetId+":"+w.tagId,tagPath:w.tagPath,displayPath:w.displayPath},null,8,["tagPath","displayPath"]))),128))]),o("div",cs,[(e(!0),t(j,null,M(_.assetIdsAfter,w=>(e(),R(ie,{id:w,key:k+":"+a(Y)(w)+":after",lazy:!1,replace:!0},null,8,["id"]))),128)),(e(),R(ie,{id:s.assetId,aClass:"is-active",key:k+":"+a(Y)(s.assetId),lazy:!1,replace:!0},null,8,["id"])),(e(!0),t(j,null,M(_.assetIdsBefore,w=>(e(),R(ie,{id:w,key:k+":"+a(Y)(w)+":before",lazy:!1,replace:!0},null,8,["id"]))),128))])]))),128))]))}}),hs=["title"],Cs=se({__name:"Asset",props:{assetId:{},from:{},priorAssetId:{}},setup(s){const m=s,h=Ae(),_=de(),{asset:k,previewAf:w,showInfo:v,isImage:q,isVideo:K,imgAttrs:E,videoAttrs:O}=re(h),C=G(void 0),A=G(!1),S=G(void 0),$=G(!1),g=G(!1),V=G(null),F=Math.floor(1e3/60),U=We({f:y=>h.onMouseMove(y),minCallDelayMs:F}),W=b(()=>({asset:!0,page:!0,"is-video":K.value,"is-image":q.value,"show-info":v.value,"show-streams":A.value})),H=b(()=>tt(k.value??void 0)),z=b(()=>st(k.value??void 0));function N(){A.value&&g.value&&k.value!=null&&ge("#bottom","auto")}function Z(){g.value=!1,S.value=void 0,C.value=void 0,h.resetAsset()}async function l(){if(!g.value)return;const y=m.assetId;if(y==null){_.show({type:"error",text:"Internal error",details:"fetchAsset(): missing asset id"});return}if(k.value?.assetId!==y)return ve(V.value,"stop"),ne({p:ee("/api/asset/"+y+He({from:m.from,priorAssetId:m.priorAssetId})),predicate:p=>g.value&&y===p?.assetId,ifTrue:p=>{h.setAsset(p),document.title=Me([J(k.value,T=>T.capturedAtLocale),"PhotoStructure"]).join(" - "),setTimeout(()=>g.value?ve(V.value,"load"):void 0,100),c(y),D(y)}})}function c(y){const p=me(y,m.assetId);if(g.value!==!0||v.value!==!0||m.assetId==null||m.assetId!==p){m.assetId===p&&(C.value=void 0);return}return ne({p:ee(`/api/asset/${p}/info`),predicate:T=>T?.assetId===m.assetId,ifTrue:T=>{C.value=T,h.handleResize()}})}async function D(y){const p=me(y,m.assetId);if(!g.value||!A.value||m.assetId==null||m.assetId!==p){m.assetId===p&&(S.value=void 0);return}$.value=!0,await ne({p:ee(`/api/asset/${p}/streams`),predicate:T=>T?.assetId===m.assetId,ifTrue:T=>{S.value=T,Be(()=>ge("#bottom"),100)}}),$.value=!1}function r(y){h.setPreviewAf(y??null)}async function f(){await ee("/api/asset/"+m.assetId+"/resync",{method:"PUT"}),window.location.reload()}function I(){h.setShowInfo(!1)}function x(y){je(y)?h.setScale(y):h.toggleZoom()}function Q(y){U(y)}function X(y){h.onWheel(y)}return ae(()=>m.assetId,l),ae(v,()=>c()),ae(A,()=>D()),Ce(()=>{Xe(N),g.value=!0,l()}),Pe(()=>{Le()}),$e(()=>{g.value=!0,l()}),xe(()=>{Z()}),Te(()=>{Ge(N)}),(y,p)=>{const T=Ie("router-link");return a(k)?(e(),t("div",{key:0,class:_e(W.value)},[i(It,{onResync:f}),p[3]||(p[3]=o("span",{id:"top"},null,-1)),Re(i(rs,{assetId:s.assetId,info:C.value,previewAf:a(w)??void 0,onHideInfo:I,onPreviewAf:r},null,8,["assetId","info","previewAf"]),[[Fe,a(v)]]),(e(),t("div",{id:"fullscreen",key:a(k).assetId+"fs",onMousemovePassive:p[2]||(p[2]=B=>Q(B))},[a(q)?(e(),t("img",oe({key:0,id:"imgAsset"},a(E),{key:a(k).assetId,"data-key":"z",onClick:x,onWheelPassive:p[0]||(p[0]=B=>X(B))}),null,16)):a(K)?(e(),t("video",oe({key:1,ref_key:"videoRef",ref:V},a(O),{key:a(k).assetId}),[(e(!0),t(j,null,M(a(k).videoSources,(B,Se)=>(e(),t("source",oe({key:typeof B.src=="string"?B.src:Se},{ref_for:!0},B),null,16))),128))],16)):n("",!0),a(k)&&a(k).afterAssetId&&H.value?(e(),R(T,{key:2,title:"View previous",class:"nav middle left prev hide-on-idle",to:H.value,replace:"","data-key":"left","data-key2":"j"},{default:L(()=>[i(d,{icon:"navigate_before"})]),_:1},8,["to"])):n("",!0),a(k)&&a(k).beforeAssetId&&z.value?(e(),R(T,{key:3,title:"View next",class:"nav middle right next hide-on-idle",to:z.value,replace:"","data-key":"right","data-key2":"k"},{default:L(()=>[i(d,{icon:"navigate_next"})]),_:1},8,["to"])):n("",!0),o("a",{title:A.value?"Hide streams":"Show streams",onClick:p[1]||(p[1]=B=>A.value=!A.value),class:"nav hide-on-idle bottom","data-key":"s"},[i(d,{icon:$.value?"busy":A.value?"close":"streams"},null,8,["icon"])],8,hs)],32)),A.value&&S.value?(e(),R(fs,{key:0,assetStreams:S.value.assetStreams,assetId:a(k)},null,8,["assetStreams","assetId"])):n("",!0),p[4]||(p[4]=o("div",{id:"bottom"},null,-1))],2)):n("",!0)}}});export{Cs as default};
