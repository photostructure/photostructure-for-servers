#!/usr/bin/env node

/*
 * Copyright © 2021, PhotoStructure Inc.
 * By using this software, you accept all of the terms in <https://photostructure.com/eula>.
 * IF YOU DON'T ACCEPT THESE TERMS, DO NOT USE THIS SOFTWARE
 */

(()=>{var t={42041:(t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.gitDate=n.gitSha=n.release=n.version=void 0,n.version="1.0.0-beta.4",n.release="1.0.0-beta.4+20210608133153",n.gitSha="0b67aefa4aa2d0e44e22842f15c13e06d45ce7c1",n.gitDate=new Date(1623184313e3),n.default={version:n.version,release:n.release,gitSha:n.gitSha,gitDate:n.gitDate}},79682:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addFooter=n.CliDesc=n.descriptionFooter=void 0;const r=e(61765),i=e(44726),o=(new Date).getFullYear();n.descriptionFooter=`Please visit <https://photostructure.com/support/> for detailed usage and configuration instructions.\n\nCopyright © 2017-${o}, PhotoStructure Inc.\n\nRunning this software indicates your agreement to all the terms of this license: <https://photostructure.com/eula/>`,n.CliDesc={main:"PhotoStructure's main process manager. Runs and manages web and sync services.",info:"Configuration, file metadata and import diagnostics tool.",list:"List paths in a Library.",logcat:"Chronologically sort and pretty-print PhotoStructure logfiles.",logtail:"View the log messages of currently-running PhotoStructure processes. (Like `tail -f`).",web:"PhotoStructure's web service. Automatically started by main.",sync:"PhotoStructure's directory synchronization service. Automatically started by main.","sync-file":"PhotoStructure's file synchronization service. Automatically started by sync."},n.addFooter=function(t){return t.on("--help",(()=>{var t;console.log("\n"+i.wrap(n.descriptionFooter,{maxLineLen:null!==(t=r.stdout.columns)&&void 0!==t?t:78,prefix:""}).join("\n")+"\n")}))}},11944:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.commaList=n.last=n.diff=n.stepRange=n.range=n.anneal=n.commonPrefixLength=n.firstMatch=n.sum=n.count=n.clear=n.uniqBy2=n.uniqBy=n.uniq=n.compactBlanks=n.compactBlankish=n.compact=n.insertUniq=n.insertAt=n.pushUniqBy=n.pushUniq=n.eqlUnordered=n.includesAll=n.indexOf=n.includes=n.move=n.filterInPlace=n.startsWith=n.arrayEql=n.deepSortBy=n.sortBy=n.sortedBy=n.sorted=n.sortUniqByInPlace=n.sortByInPlace=n.copyArrayTo=n.sort=n.flatten=n.mapNotEmptyOr=n.mapNotEmpty=n.mapArray=n.isEmpty=n.notEmptyOr=n.isNotEmpty=void 0;const r=e(39938),i=e(24603),o=e(20810),u=e(87748),l=e(1682),s=e(21040),c=e(66776),a=e(8199),f=e(23175),p=e(44726),d=e(90957),m=e(39784),h=e(82798);function y(t){return l.isList(t)&&t.length>0&&t.some((t=>null!=t))}function g(t){return!y(t)}function v(t){return a.isPrimitive(t)||a.isPrimitiveArray(t)?t:t.valueOf()}function b(t,n){for(let e=0;e<t.length;e++)n[e]=t[e];return n.length=t.length,n}function O(t,n){return b(M(t,n),t)}function M(t,n){return m.toA(t).filter((t=>null!=t)).map(((t,e)=>({item:t,cmp:c.map(n(t,e),(t=>[t,e]))}))).filter((t=>null!=t.cmp)).sort(((t,n)=>a.cmp(t.cmp,n.cmp))).map((t=>t.item))}function j(t,n){return null!=t&&null!=n&&t.length===n.length&&t.every(((t,e)=>t===n[e]))}function S(t,n,e){if(n===e||n<0||e<0||n>=t.length||e>=t.length)return t;const r=t[n];return t.splice(n,1),t.splice(e,0,r),t}function P(t,n){if(null==t)return!1;for(const e of t)if(n.valueOf()===e.valueOf())return!0;return!1}function E(t){if(null==t)return[];const n=m.toA(t);return n.every(c.defined)?n:n.filter(c.defined)}function A(t,n=(t=>u.stringify(t))){if(g(t))return[];const e=new Map;for(const r of t)if(null!=r){const t=n(r);null!=t&&s.getOrSet(e,t,(()=>r))}return[...e.values()]}function k(t,n,e=1,r=(t=>t)){const i=[];if(t<n)for(let o=t;o<n;o+=e)i.push(r(o));else for(let o=t;o>n;o-=e)i.push(r(o));return i}n.isNotEmpty=y,n.notEmptyOr=function(t,n){return y(t)?t:d.tot(n)},n.isEmpty=g,n.mapArray=function(t,n){return Array.isArray(t)?n(t):void 0},n.mapNotEmpty=function(t,n){return y(t)?n(t):void 0},n.mapNotEmptyOr=function(t,n,e){return y(t)?n(t):d.tot(e)},n.flatten=function(t,n=[]){if(null==t)return n;for(const e of t)if(null!=e)if(Array.isArray(e))for(const t of e)null!=t&&n.push(t);else n.push(e);return n},n.sort=function(t){return O(E(t),v)},n.copyArrayTo=b,n.sortByInPlace=O,n.sortUniqByInPlace=function(t,n){const e=new Map;for(const r of t)s.getOrSet(e,u.stringify(n(r)),(()=>r));return b(M(e.values(),n),t)},n.sorted=function(t){return t.every(((n,e)=>0===e||n>t[e-1]))},n.sortedBy=function(t,n){return t.every(((e,r)=>0===r||n(e)>n(t[r-1])))},n.sortBy=M,n.deepSortBy=function t(n,e){return M(n,e).map((n=>o.isIterable(n)?t(n,e):n))},n.arrayEql=j,n.startsWith=function(t,n){return j(t.slice(0,n.length),n)},n.filterInPlace=function(t,n){for(let e=0;e<t.length;)n(t[e],e,t)?e++:t.splice(e,1);return t},n.move=S,n.includes=P,n.indexOf=function(t,n){if(null==t)return;let e=0;for(const r of t){if(n(r,e))return e;e++}},n.includesAll=function(t,n){return null!=t&&null!=n&&n.every((n=>P(t,n)))},n.eqlUnordered=function(t,n){if(null==t||null==n||t.length!==n.length)return!1;const e=M(t,v),r=M(n,v);return e.every(((t,n)=>t===r[n]))},n.pushUniq=function(t,...n){for(const e of n)t.some((t=>i.eql(t,e)))||t.push(e);return t},n.pushUniqBy=function(t,n,e){const r=t.map(e);for(const i of n){const n=e(i);r.includes(n)||(t.push(i),r.push(n))}return t},n.insertAt=function(t,n,...e){return t.splice(n,0,...e),t},n.insertUniq=function(t,n,e){for(let n=0;n<t.length-1;n++)if(e(t[n],t[n+1])>0)throw new Error("badly sorted array: "+t);for(let r=0;r<t.length;r++){const i=e(t[r],n);if(0===i)return t;if(i>0)return t.splice(r,0,n),t}return t.push(n),t},n.compact=E,n.compactBlankish=function(t){const n=m.toA(t).filter((t=>!r.blankish(h.toS(t))));return p.isString(n[0])?n.map((t=>h.toS(t).trim())):n},n.compactBlanks=function(t){return m.toA(t).map((t=>h.toS(t).trim())).filter((t=>t.length>0))},n.uniq=function(t){return A(E(t),(t=>u.stringify(t)))},n.uniqBy=A,n.uniqBy2=function(t,n){if(g(t))return[];const e=[];for(const r of t)null!=r&&e.every((t=>!n(r,t)))&&e.push(r);return e},n.clear=function(t){return t.length=0,t},n.count=function(t,n){return t.reduce(((t,e,r)=>t+(n(e,r)?1:0)),0)},n.sum=function(t,n){return t.reduce(((t,e,r)=>t+n(e,r)),0)},n.firstMatch=function(t,n){for(const e of E(n)){const n=t.exec(e);if(null!=n)return n}},n.commonPrefixLength=function(t,n){if(null==t||null==n)return 0;if(t===n)return t.length;if("string"==typeof t&&(t=[...t]),"string"==typeof n&&(n=[...n]),j(t,n))return t.length;let e=0;for(;t[e]===n[e];)e++;return e},n.anneal=function({array:t,expense:n,allowedDelta:e}){const r=Math.round(e);if(r<2)return t;for(let e=0;e<t.length-1;e++){const i=f.randomInt(Math.max(0,e-r),Math.min(t.length,e+r),[e]);if(null==i)continue;const o=Math.max(0,Math.min(i,e)-1),u=Math.min(t.length,Math.max(i,e)+1),l=n(t,o,u);S(t,e,i);const s=n(t,o,u);a.lt(l,s)&&S(t,i,e)}return t},n.range=function(t,n,e=(t=>t)){return k(t,n,1,e)},n.stepRange=k,n.diff=function(t,n){const e=new Set(n);return t.filter((t=>!e.has(t)))},n.last=function(t){return null!=t?t[t.length-1]:void 0},n.commaList=function(t,n="or"){return t.length<=1?t.join(""):2===t.length?t.join(" "+n+" "):t.slice(0,-1).join(", ")+", "+n+" "+t[t.length-1]}},37609:(t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.at=void 0,n.at=function(t,n){if((n=Math.trunc(n)||0)<0&&(n+=t.length),!(n<0||n>=t.length))return t[n]}},39938:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.firstNotBlank=n.mapNotBlankOr=n.mapNotBlank=n.notBlankAnd=n.notBlankOr=n.ifNotBlank=n.notBlank=n.blankish=n.blank=void 0;const r=e(66776),i=e(90957),o=e(82798);function u(t){if(null==t)return!0;const n=o.toS(t);return 0===n.length||0===n.trim().length}n.blank=u;const l=/^\s*(?:null|undefined)?\s*$/i;function s(t){return!u(t)}function c(t,n){if(!1===t||null==t||""===t)return;const e=o.toS(t);return s(e)?n(e):void 0}n.blankish=function(t){return null==t||null!=l.exec(t)},n.notBlank=s,n.ifNotBlank=function(t){if(null==t)return;const n=o.toS(t);return 0===n.length||0===n.trim().length?void 0:n},n.notBlankOr=function(t,n){if(null==t)return i.tot(n);const e=o.toS(t).trim();return e.length>0?e:i.tot(n)},n.notBlankAnd=function(t,n){return!u(t)&&n(t)},n.mapNotBlank=c,n.mapNotBlankOr=function(t,n,e){return r.orElse(c(t,n),e)},n.firstNotBlank=function(...t){for(const n of t)if(s(n))return n}},24603:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.objectEql=n.eql=void 0;const r=e(61570),i=e(34601),o=e(8199);function u(t,n){return null==t||null==n?null==t&&null==n:o.isPrimitive(t)&&o.isPrimitive(n)?t===n:i.isObject(t)&&i.isObject(n)?l(t,n):!(!Array.isArray(t)||!Array.isArray(n))&&t.length===n.length&&t.every(((t,e)=>u(t,n[e])))}function l(t,n){const e=r.keys(t);return e.length===r.keys(n).length&&e.every((e=>u(t[e],n[e])))}n.eql=u,n.objectEql=l},20810:(t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isIterable=void 0,n.isIterable=function(t){return null!=t&&"string"!=typeof t&&"function"==typeof t[Symbol.iterator]}},87748:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clone=n.stringify=n.parseMaybe=void 0;const r=e(39938),i=e(66776);function o(t,n,e,r){return JSON.stringify(t,function(t,n){const e=[],r=[],i=null!=n?n:(t,n)=>e[0]===n?"[Circular ~]":"[Circular ~."+r.slice(0,e.indexOf(n)).join(".")+"]";return function(n,o){if(e.length>0){const t=e.indexOf(this);t>=0?(e.splice(t+1),r.splice(t,1/0,n)):(e.push(this),r.push(n)),e.indexOf(o)>=0&&(o=i.call(this,n,o))}else e.push(o);return null==t?o:t.call(this,n,o)}}(n,r),i.denull(e))}n.parseMaybe=function(t){try{if(r.notBlank(t))return JSON.parse(t)}catch{}},n.stringify=o,n.clone=function(t){return JSON.parse(o(t))}},1682:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isList=void 0;const r=e(34601);n.isList=function(t){return null!=t&&(Array.isArray(t)||isFinite(t.length)&&r.isFunction(t[Symbol.iterator])&&r.isFunction(t.push)&&r.isFunction(t.pop)&&r.isFunction(t.forEach)&&r.isFunction(t.some))}},21040:(t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.deleteIf=n.getOrSet=void 0,n.getOrSet=function(t,n,e){if(null==n)throw new Error("null key");if(t.has(n))return t.get(n);{const r=e();return null!=r&&t.set(n,r),r}},n.deleteIf=function(t,n){for(const[e,r]of t.entries())n(e,r)&&t.delete(e)}},66776:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nulled=n.denull=n.firstDefined=n.allDefined=n.defined=n.map2Or=n.mapOr=n.orElse=n.map3=n.map2=n.mapTry=n.map=void 0;const r=e(90957),i=e(82798);function o(t,n){return null==t?void 0:n(t)}function u(t,n,e){return null==t||null==n?void 0:e(t,n)}function l(t,n){return null!=t?t:r.tot(n)}function s(t){return null!=t}n.map=o,n.mapTry=function(t,n){try{return o(t(),n)}catch{return}},n.map2=u,n.map3=function(t,n,e,r){return null==t||null==n||null==e?void 0:r(t,n,e)},n.orElse=l,n.mapOr=function(t,n,e){return null!=t?n(t):r.tot(e)},n.map2Or=function(t,n,e,r){return l(u(t,n,e),r)},n.defined=s,n.allDefined=function(t){return null!=t&&t.every(s)},n.firstDefined=function(...t){return t.find(s)},n.denull=function(t){return null==t||"null"===i.toS(t)?void 0:t},n.nulled=function(t){return null==t?null:t}},89253:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.groupByValues=n.groupBy=n.MultiMap=void 0;const r=e(11944),i=e(24603),o=e(21040),u=e(66776),l=e(39784);class s{constructor(t=new Map){this.store=t}get(t){return this.store.get(t)}has(t){return this.store.has(t)}get keyCount(){return this.store.size}get valueCount(){return r.sum([...this.store.values()].map((t=>t.length)),(t=>t))}add(t,...n){const e=o.getOrSet(this.store,t,(()=>[]));return e.push(...n),e}set(t,n){this.store.set(t,n)}delete(t,n){if(null==n)return this.store.delete(t);{const e=this.store.get(t);if(null==e)return!1;{const r=e.filter((t=>!i.eql(t,n)));return 0===r.length?this.store.delete(t):this.store.set(t,r),e.length!==r.length}}}clear(){return this.store.clear(),this}keys(){const t=this;return function*(){for(const[n,e]of t.store.entries())e.length>0&&(yield n)}()}values(){const t=this;return function*(){for(const[,n]of t.store.entries())n.length>0&&(yield n)}()}flatValues(){const t=this;return function*(){for(const[,n]of t.store.entries())if(n.length>0)for(const t of n)yield t}()}entriesArray(){return[...this.store.entries()].filter((([,t])=>r.isNotEmpty(t)))}entries(){const t=this;return function*(){for(const[n,e]of t.store.entries())e.length>0&&(yield[n,e])}()}tuples(){const t=this;return function*(){for(const[n,e]of t.store.entries())for(const t of l.toA(e))null!=t&&(yield[n,t])}()}filterInPlace(t){let n=!1;for(const[e,i]of this.store.entries()){const o=i.length;r.filterInPlace(i,(n=>t(e,n))),n=n||o!==i.length}return n}inverse(){const t=new s;for(const[n,e]of this.store.entries())for(const r of e)t.add(r,n);return t}}function c(t,n){const e=new s;return t.forEach((t=>u.map(n(t),(n=>e.add(n,t))))),e}n.MultiMap=s,n.groupBy=c,n.groupByValues=function(t,n){const e=c(t,n);return r.sortBy(l.toA(e.values()),(t=>n(t[0])))}},75556:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.times=n.clamp=n.base10Ceil=n.base2Ceil=n.sigFigs=n.toPrecision=n.toFixed=n.toPrecisionMaybe=n.round=n.numericOr=n.mapNumericOr=n.map2Numeric=n.mapNumeric=n.mapIntOr=n.id=n.mapFloat=n.mapInt=n.gte0=n.lte0=n.gtOrElse=n.gt0=n.lt0=n.toGt0=n.toFloat=n.toInt=n.isToNumber=n.trunc=n.closeTo=n.approximates=n.safeDivide=n.absdiff=n.diff=n.finiteOrElse=n.gte=n.gt=n.lte=n.lt=n.mapFinite=n.isNumber=void 0;const r=e(39938),i=e(66776),o=e(34601),u=e(98510),l=e(90957),s=e(82798);function c(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function a(t,n){return c(t)?n(t):void 0}n.isNumber=c,n.mapFinite=a;const f=t=>(n,e)=>c(n)&&c(e)&&t(n,e);function p(t,n){return t/(0===n?1e-8:n)}function d(t){if(!c(t))return;const n=Math.trunc(t);return 0===n?Math.abs(n):n}function m(t){return o.isFunction(t.toNumber)}function h(t,n){if(r.blank(t))return n.defaultValue;if(c(t))return n.nton(t);if(m(t))return n.nton(t.toNumber());try{const e=n.ston(s.toS(t).trim());return c(e)?n.nton(e):n.defaultValue}catch{return n.defaultValue}}function y(t,n){return h(t,{defaultValue:void 0,nton:t=>d(t),ston:parseInt,...n})}function g(t,n){return h(t,{defaultValue:void 0,nton:t=>t,ston:parseFloat,...n})}function v(t){return c(t)&&t>0}function b(t,n){return u.opt(t).flatMap((t=>y(t))).flatMap(n).get()}function O(t,n){return c(t)?n(t):void 0}function M(t){return t<0?-Math.round(-t):Math.round(t)}function j(t,n){if(null==t)return 0;const e=Math.pow(10,n);return M(t*e)/e}n.lt=f(((t,n)=>t<n)),n.lte=f(((t,n)=>t<=n)),n.gt=f(((t,n)=>t>n)),n.gte=f(((t,n)=>t>=n)),n.finiteOrElse=function(t,n){return c(t)?t:n},n.diff=function(t,n){return c(t)&&c(n)?t-n:void 0},n.absdiff=function(t,n){return c(t)&&c(n)?Math.abs(t-n):void 0},n.safeDivide=p,n.approximates=function(t,e,r){return null!=t&&null!=e&&(t===e||n.gte(t<e?p(t,e):p(e,t),r))},n.closeTo=function(t,n,e){return null!=t&&null!=n&&Math.abs(t-n)<e},n.trunc=d,n.isToNumber=m,n.toInt=y,n.toFloat=g,n.toGt0=function(t){const n=y(t);return null!=n&&n>0?n:void 0},n.lt0=function(t){return c(t)&&t<0},n.gt0=v,n.gtOrElse=function(t,n){return c(t)&&c(n)&&t>n?t:void 0},n.lte0=function(t){return c(t)&&t<=0},n.gte0=function(t){return c(t)&&t>=0},n.mapInt=b,n.mapFloat=function(t,n){return u.opt(t).flatMap((t=>g(t))).flatMap(n).get()},n.id=function(t){const n=y(t);return v(n)?String(n):void 0},n.mapIntOr=function(t,n,e){return i.orElse(b(t,n),e)},n.mapNumeric=O,n.map2Numeric=function(t,n,e){return O(t,(t=>O(n,(n=>e(t,n)))))},n.mapNumericOr=function(t,n,e){return c(t)?n(t):e},n.numericOr=function(t,n){return c(t)?t:l.tot(n)},n.round=M,n.toPrecisionMaybe=function(t,n){return a(t,(t=>j(t,n)))},n.toFixed=function(t,n){try{return O(t,(t=>M(t*10**n)/10**n))}catch(t){return}},n.toPrecision=j,n.sigFigs=function(t,n){if(0===t||0===n)return 0;const e=n-M(Math.ceil(Math.log10(Math.abs(t)))),r=Math.pow(10,Math.abs(e));return e<0?M(t/r)*r:M(t*r)/r},n.base2Ceil=function(t){return Math.pow(2,Math.ceil(Math.log2(t)))},n.base10Ceil=function(t){return Math.pow(10,Math.ceil(Math.log10(t)))},n.clamp=function(t,n,e){if(t>n||!c(t)||!c(n))throw new Error(`invalid clamp(${t}, ${n}, ${e})`);return c(e)?e<t?t:e>n?n:e:M((t+n)/2)},n.times=function(t,n){if(!v(t))return[];const e=Math.round(t);return e<=0?[]:[...Array(e)].map(((t,e)=>n(e)))}},61570:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.firstValueCaseInsensitive=n.maybeCall=n.allKeys=n.filter=n.sortedKeys=n.onlyReqValued=n.mapReqValued=n.reqValuedOrElse=n.isReqValued=n.omit=n.pickFirst=n.pick=n.mapFields=n.compactBlankValues=n.compactValues=n.fromEntries=n.entries=n.values=n.mapCompactObj=n.notEmptyObj=n.emptyObj=n.keys=n.tap=void 0;const r=e(11944),i=e(39938),o=e(87748),u=e(66776),l=e(89253),s=e(34601),c=e(82798);function a(t,n){return null!=n?n(t):"string"==typeof t?console.log(t):console.dir(t,{depth:null}),t}function f(t){return null==t||"object"!=typeof t?[]:Object.keys(t).filter((n=>"string"==typeof n&&(null==t.propertyIsEnumerable||!0===t.propertyIsEnumerable(n))))}function p(t){return null!=t&&r.isNotEmpty(f(t))}function d(t){return f(t).map((n=>t[n]))}function m(t){return f(t).map((n=>[n,t[n]]))}function h(t,n){return"object"!=typeof n&&(n={}),r.compact(t).reduce(((t,[n,e])=>a(t,(()=>{null!=n&&null!=e&&(t[n]=e)}))),n)}function y(t){if(null==t)return;const n=m(t);if(n.every((([,t])=>null!=t)))return t;const e=n.filter((([,t])=>null!=t));return r.isEmpty(e)?void 0:h(e)}function g(t){return d(t).every((t=>null!=t))}n.tap=a,n.keys=f,n.emptyObj=function(t){return r.isEmpty(f(t))},n.notEmptyObj=p,n.mapCompactObj=function(t,n){const e=y(t);return p(e)?n(e):void 0},n.values=d,n.entries=m,n.fromEntries=h,n.compactValues=y,n.compactBlankValues=function(t){if(null==t)return;const n=m(t).filter((([t,n])=>null!=t&&i.notBlank(n)));return r.isEmpty(n)?void 0:h(n)},n.mapFields=function(t,n,e={}){return h(r.compact(m(t).sort((([t],[n])=>t.localeCompare(n,void 0,{sensitivity:"base"}))).map((([t,e])=>n(t,e)))).filter((([t,n])=>null!=t&&null!=n)),e)},n.pick=function t(n,...e){if(null==n)return n;if(!e.every((t=>"string"==typeof t)))throw new Error("bad keys: "+o.stringify(e));if(r.isEmpty(e))return{};const i={},u=[],s=new l.MultiMap;for(const t of e.map(c.toS)){const n=t.indexOf(".");-1===n?u.push(t):s.add(t.slice(0,n),t.slice(n+1))}for(const t of u){const e=n[t];null!=e&&(i[t]=e)}for(const[e,r]of s.entries()){const o=n[e];null!=o&&(i[e]=t(o,...r))}return i},n.pickFirst=function(t,n,e=u.defined){if(null!=t)for(const r of n)if(e(t[r]))return t[r]},n.omit=function(t,...n){if(null==t||n.every((n=>i.blank(t[n]))))return t;const e=m(t).filter((([t])=>!n.includes(t)));return r.isEmpty(e)?void 0:h(e)},n.isReqValued=g,n.reqValuedOrElse=function(t){return g(t)?t:void 0},n.mapReqValued=function(t,n){return g(t)?n(t):void 0},n.onlyReqValued=function(t){return t.filter(g)},n.sortedKeys=function(t){return h(r.sortBy(m(t),(([t])=>t.toLowerCase())))},n.filter=function(t,n){return null==t?t:h(m(t).filter((([t,e])=>n(t,e))))},n.allKeys=function(t){const n=f(t);for(;null!=(t=Reflect.getPrototypeOf(t));)n.push(...Reflect.ownKeys(t).filter((t=>"string"==typeof t)));return r.uniq(n)},n.maybeCall=function(t,n,...e){return null!=t&&s.isFunction(t[n])?t[n].bind(t)(...e):void 0},n.firstValueCaseInsensitive=function(t,n){if(i.blank(n))return;if(null!=t[n])return t[n];const e=n.toLocaleLowerCase().normalize();for(const n of f(t))if(e===n.toLocaleLowerCase().normalize()&&null!=t[n])return t[n]}},34601:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.objectType=n.isObject=n.isFunction=n.isSymbol=n.ObjectType=void 0;const r=e(20810),i=e(8199);var o;function u(t){return"symbol"==typeof t}function l(t){return"function"==typeof t}function s(t){return null==t?o.Empty:u(t)?o.Symbol:i.isPrimitive(t)?o.Primitive:Array.isArray(t)?o.Array:r.isIterable(t)?o.Iterable:l(t)?o.Function:"object"==typeof t?null!=t.constructor&&"Object"===t.constructor.name?o.Object:o.Instance:o.Unknown}!function(t){t[t.Empty=0]="Empty",t[t.Primitive=1]="Primitive",t[t.Symbol=2]="Symbol",t[t.Object=3]="Object",t[t.Array=4]="Array",t[t.Iterable=5]="Iterable",t[t.Instance=6]="Instance",t[t.Function=7]="Function",t[t.Unknown=8]="Unknown"}(o=n.ObjectType||(n.ObjectType={})),n.isSymbol=u,n.isFunction=l,n.isObject=function(t){return s(t)===o.Object},n.objectType=s},98510:(t,n)=>{"use strict";var e;Object.defineProperty(n,"__esModule",{value:!0}),n.opt=n.isOpt=n.Some=n.None=void 0,function(t){t.isDefined=!1,t.isEmpty=!0,t.get=()=>{},t.exists=()=>!1;const n=()=>t;t.map=n,t.flatMap=n,t.filter=n,t.forEach=n,t.getOrElse=t=>t(),t.orElse=t=>o(t()),t.zip1=n,t.zip2=n,t.zip3=n}(e||(e={})),n.None=e;class r{constructor(t){this.a=t,this.isDefined=!0,this.isEmpty=!1}get(){return this.a}exists(t){return t(this.a)}map(t){return new r(t(this.a))}flatMap(t){const n=t(this.a);return i(n)?n:o(n)}filter(t){return o(t(this.a)?this.a:void 0)}forEach(t){return t(this.a),this}getOrElse(){return this.a}orElse(){return this}zip1(t,n){return o(t).flatMap((t=>n(this.a,t)))}zip2(t,n,e){return o(t).flatMap((t=>o(n).flatMap((n=>e(this.a,t,n)))))}zip3(t,n,e,r){return o(t).flatMap((t=>o(n).flatMap((n=>o(e).flatMap((e=>r(this.a,t,n,e)))))))}}function i(t){return t instanceof r||t===n.None}function o(t){return i(t)?t:null!=t?new r(t):n.None}n.Some=r,n.isOpt=i,n.opt=o},8199:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cmpArr=n.gt=n.gte=n.lte=n.lt=n.cmp=n.isPrimitiveArray=n.mapPrimitiveOr=n.mapPrimitive=n.isPrimitive=void 0;const r=e(11944),i=e(82798),o=["number","string","boolean"];function u(t){return-1!==o.indexOf(typeof t)||t instanceof Date}n.isPrimitive=u,n.mapPrimitive=function(t,n){return u(t)?n(t):void 0},n.mapPrimitiveOr=function(t,n,e){return u(t)?n(t):e()},n.isPrimitiveArray=function(t){return Array.isArray(t)&&t.every(u)};const l=["boolean","number","bigint","symbol","string","object","function"];function s(t,n){if(null==t&&null==n)return 0;if(null==t)return-1;if(null==n)return 1;const e=typeof t,r=typeof n;return"string"!==e&&"symbol"!==e||"string"!==r&&"symbol"!==r?Array.isArray(t)&&Array.isArray(n)?c(t,n):e!==r?l.indexOf(e)-l.indexOf(r):t>n?1:t<n?-1:0:i.toS(t).localeCompare(i.toS(n))}function c(t,n){if(r.isEmpty(t)&&r.isEmpty(n))return 0;const e=Math.min(t.length,n.length);for(let r=0;r<e;r++){const e=s(t[r],n[r]);if(0!==e)return e}return s(t.length,n.length)}n.cmp=s,n.lt=function(t,n){return s(t,n)<0},n.lte=function(t,n){return s(t,n)<=0},n.gte=function(t,n){return s(t,n)>=0},n.gt=function(t,n){return s(t,n)>0},n.cmpArr=c},23175:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.pickWeightedRandom=n.sample=n.shuffle=n.pickRandom=n.randomChar=n.randomChars=n.RandomChars=n.randomFloat=n.randomBoolean=n.randomInts=n.randomInt=void 0;const r=e(11944),i=e(75556);function o(t,n,e=[]){if(t=Math.ceil(t),(n=Math.floor(n))<t)return t;if(r.isNotEmpty(e)&&e.length+10>n-t){const i=r.range(t,n).filter((t=>!e.includes(t)));return r.mapNotEmpty(i,(t=>t[o(0,i.length)]))}const i=Math.floor(Math.random()*(n-t))+t;return e.includes(i)?o(t,n,e):i}function u(t,n){return Math.random()*(n-t)+t}function l(t=n.RandomChars){return t[o(0,t.length)]}function s(t){const n=[...t];for(let t=n.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));t!==e&&([n[t],n[e]]=[n[e],n[t]])}return n}n.randomInt=o,n.randomInts=function(t,n,e){const r=[];for(;r.length<e;)r.push(o(t,n,r));return r},n.randomBoolean=function(){return Math.random()<.5},n.randomFloat=u,n.RandomChars="0123456789abcdefghijkmnopqrstuvwxyz",n.randomChars=function(t,e=n.RandomChars){let r="";for(let n=0;n<t;n++)r+=l(e);return r},n.randomChar=l,n.pickRandom=function(t){return t[o(0,t.length)]},n.shuffle=s,n.sample=function(t,n){if(n<t.length/10){const e=new Set;for(;e.size<n;)e.add(o(0,t.length));return[...e.keys()].map((n=>t[n]))}return s([...t]).slice(0,n)},n.pickWeightedRandom=function(t){if(r.isEmpty(t))return;const n=t.filter((t=>i.gt0(t.priority)));let e=u(0,r.sum(n,(t=>t.priority)));return n.find((t=>(e-=t.priority,e<=0)))}},44726:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.orList=n.compressWhitespace=n.replaceAll=n.eqlStrings=n.wrap=n.leftIndexOf=n.newlineRe=n.ellipsize=n.ensureSuffix=n.ensurePrefix=n.strslice=n.strlen=n.charAt=n.isBMP=n.isString=void 0;const r=e(11944),i=e(37609),o=e(82798);function u(t){for(let n=t.length-1;n>=0;n--)if(t.charCodeAt(n)!==t.codePointAt(n))return!1;return!0}function l(t,n,e){return u(t)?(n<0&&(n+=t.length),null!=e&&e<0&&(e+=t.length),t.substring(n,e)):[...o.toS(t)].slice(n,e).join("")}function s(t,n){return t=o.toS(t),n=o.toS(n),t.startsWith(n)?t:n+t}function c(t,n,e){null==e&&(e=t.length);for(let r=e;r>=0;r--)if(l(t,r).startsWith(n))return r;return-1}n.isString=function(t){return"string"==typeof t},n.isBMP=u,n.charAt=function(t,n){if(u(t)){if((n=Math.trunc(n)||0)<0&&(n+=t.length),n<0||n>=t.length)return;return t[n]}return i.at([...o.toS(t)],n)},n.strlen=function(t){return u(t)?t.length:[...t].length},n.strslice=l,n.ensurePrefix=s,n.ensureSuffix=function(t,n){return t=o.toS(t),n=o.toS(n),t.endsWith(n)?t:t+n},n.ellipsize=function(t,n=80){if(null==t)return"";const e=[...o.toS(t)];return e.length<=n?e.join(""):e.slice(0,n-1).join("")+"…"},n.newlineRe=/\r?\n/gm,n.leftIndexOf=c,n.wrap=function t(e,i={maxLineLen:75,prefix:""}){if(e.includes("\n"))return r.flatten(e.split(n.newlineRe).map((n=>t(n,i))));if((e=s(o.toS(e),i.prefix).trim()).length<=i.maxLineLen)return[e];const u=c(e," ",i.maxLineLen);if(u>i.prefix.length)return[l(e,0,u),...t(l(e,u+1),i)];{const n=e.indexOf(" ",i.prefix.length+1);return n>0&&n<e.length-1?[l(e,0,n),...t(l(e,n+1),i)]:[e]}},n.eqlStrings=function(t,n){return null!=t&&null!=n&&(t===n||t.normalize()===n.normalize())},n.replaceAll=function(t,n,e){return""===n?t:t.split(n).join(e)},n.compressWhitespace=function(...t){return t.join(" ").replace(/\s+/g," ").trim()},n.orList=function(t){return t.length<=1?t.join(""):t.slice(0,-1).join(", ")+" or "+t[t.length-1]}},90957:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NoOp=n.firstDefinedSuccess=n.firstDefinedThunk=n.tot=void 0;const r=e(34601);n.tot=function(t){return r.isFunction(t)?t():t},n.firstDefinedThunk=function(t){for(const n of t){const t=n();if(null!=t)return t}},n.firstDefinedSuccess=function(t){for(const n of t)try{const t=n();if(null!=t)return t}catch{}},n.NoOp=()=>{}},39784:(t,n,e)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toA=void 0;const r=e(20810);n.toA=function(t){return null==t?[]:Array.isArray(t)?t:r.isIterable(t)?Array.from(t):[t]}},82798:(t,n)=>{"use strict";function e(t,n=","){return null==t?"":"string"==typeof t?t:Array.isArray(t)?t.map((t=>e(t,n))).join(n):t.toString()}Object.defineProperty(n,"__esModule",{value:!0}),n.toStr=n.toS=void 0,n.toS=function(t){return e(t,",")},n.toStr=e},70647:t=>{"use strict";t.exports=require("commander")},61765:t=>{"use strict";t.exports=require("process")}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var o=n[r]={exports:{}};return t[r](o,o.exports,e),o.exports}var r={};("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"1.0.0-beta.4+20210608133153"},(()=>{"use strict";var t=r;Object.defineProperty(t,"__esModule",{value:!0});const n=e(70647),i=e(61765),o=e(79682),u=e(42041);n.program.version(u.version),n.program.description("Welcome to PhotoStructure, your new home for all your photos and videos."),o.addFooter(n.program).command("main",o.CliDesc.main+" (default)",{isDefault:!0,executableFile:"bin/main.js"}).command("info",o.CliDesc.info,{executableFile:"bin/info.js"}).command("list",o.CliDesc.list,{executableFile:"bin/list.js"}).command("logcat",o.CliDesc.logcat,{executableFile:"bin/logcat.js"}).command("logtail",o.CliDesc.logtail,{executableFile:"bin/logtail.js"}).command("web",o.CliDesc.web,{executableFile:"bin/web.js"}).command("sync",o.CliDesc.sync,{executableFile:"bin/sync.js"}).command("sync-file",o.CliDesc["sync-file"],{executableFile:"bin/sync-file.js"}).parse(i.argv)})(),module.exports=r})();
//# sourceMappingURL=photostructure.js.map